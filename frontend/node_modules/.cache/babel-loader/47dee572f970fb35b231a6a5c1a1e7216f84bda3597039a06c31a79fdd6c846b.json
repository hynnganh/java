{"ast":null,"code":"// services/cartService.js\nimport api from './api';\nconst cartService = {\n  // Láº¥y giá» hÃ ng active cá»§a user\n  getActiveCart: async email => {\n    try {\n      const response = await api.get(`/public/users/${email}/carts/active`);\n      return response.data;\n    } catch (error) {\n      console.error('âŒ Lá»—i khi láº¥y giá» hÃ ng:', error);\n      throw error;\n    }\n  },\n  // ThÃªm sáº£n pháº©m vÃ o giá» hÃ ng\n  addToCart: async (cartId, productId, quantity) => {\n    try {\n      let url;\n      if (cartId) {\n        // Náº¿u cÃ³ cartId, thÃªm vÃ o giá» hÃ ng hiá»‡n táº¡i\n        url = `/public/carts/${cartId}/products/${productId}/quantity/${quantity}`;\n      } else {\n        // Náº¿u khÃ´ng cÃ³ cartId, táº¡o giá» hÃ ng má»›i\n        // Sá»­ dá»¥ng endpoint khÃ¡c Ä‘á»ƒ táº¡o giá» hÃ ng má»›i\n        url = `/public/carts/products/${productId}/quantity/${quantity}`;\n      }\n      console.log(\"ðŸ“¡ Gá»i API:\", url);\n      const response = await api.post(url);\n      return response.data;\n    } catch (error) {\n      var _error$response;\n      console.error('âŒ Lá»—i khi thÃªm vÃ o giá» hÃ ng:', error);\n      console.error('ðŸ“Š Response data:', (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n      throw error;\n    }\n  },\n  // Táº¡o giá» hÃ ng má»›i\n  createCart: async email => {\n    try {\n      // Endpoint Ä‘á»ƒ táº¡o giá» hÃ ng má»›i - cÃ³ thá»ƒ cáº§n Ä‘iá»u chá»‰nh theo API thá»±c táº¿\n      const response = await api.post(`/api/public/users/${email}/carts`);\n      return response.data;\n    } catch (error) {\n      console.error('âŒ Lá»—i khi táº¡o giá» hÃ ng:', error);\n      throw error;\n    }\n  },\n  // Láº¥y hoáº·c táº¡o giá» hÃ ng active\n  getOrCreateActiveCart: async email => {\n    try {\n      // Thá»­ láº¥y giá» hÃ ng active\n      const cart = await cartService.getActiveCart(email);\n      return cart;\n    } catch (error) {\n      console.log('ðŸ“¦ KhÃ´ng cÃ³ giá» hÃ ng active, Ä‘ang táº¡o má»›i...');\n      // Náº¿u khÃ´ng cÃ³, táº¡o giá» hÃ ng má»›i\n      const newCart = await cartService.createCart(email);\n      return newCart;\n    }\n  },\n  // Cáº­p nháº­t sá»‘ lÆ°á»£ng sáº£n pháº©m\n  updateQuantity: async (cartId, productId, quantity) => {\n    try {\n      const response = await api.put(`/api/public/carts/${cartId}/products/${productId}/quantity/${quantity}`);\n      return response.data;\n    } catch (error) {\n      console.error('âŒ Lá»—i khi cáº­p nháº­t sá»‘ lÆ°á»£ng:', error);\n      throw error;\n    }\n  },\n  // XÃ³a sáº£n pháº©m khá»i giá» hÃ ng\n  removeFromCart: async (cartId, productId) => {\n    try {\n      const response = await api.delete(`/api/public/carts/${cartId}/products/${productId}`);\n      return response.data;\n    } catch (error) {\n      console.error('âŒ Lá»—i khi xÃ³a sáº£n pháº©m:', error);\n      throw error;\n    }\n  },\n  // Táº¡o Ä‘Æ¡n hÃ ng tá»« giá» hÃ ng\n  createOrder: async (email, cartId, paymentMethod) => {\n    try {\n      const response = await api.post(`/api/public/users/${email}/carts/${cartId}/payments/${paymentMethod}/order`);\n      return response.data;\n    } catch (error) {\n      console.error('âŒ Lá»—i khi táº¡o Ä‘Æ¡n hÃ ng:', error);\n      throw error;\n    }\n  },\n  // TÃ­nh tá»•ng tiá»n\n  calculateTotal: cartItems => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      var _item$product;\n      const price = ((_item$product = item.product) === null || _item$product === void 0 ? void 0 : _item$product.price) || 0;\n      return total + price * item.quantity;\n    }, 0);\n  }\n};\nexport default cartService;","map":{"version":3,"names":["api","cartService","getActiveCart","email","response","get","data","error","console","addToCart","cartId","productId","quantity","url","log","post","_error$response","createCart","getOrCreateActiveCart","cart","newCart","updateQuantity","put","removeFromCart","delete","createOrder","paymentMethod","calculateTotal","cartItems","length","reduce","total","item","_item$product","price","product"],"sources":["D:/JVA/frontend/src/services/cartService.js"],"sourcesContent":["// services/cartService.js\nimport api from './api';\n\nconst cartService = {\n  // Láº¥y giá» hÃ ng active cá»§a user\n  getActiveCart: async (email) => {\n    try {\n      const response = await api.get(`/public/users/${email}/carts/active`);\n      return response.data;\n    } catch (error) {\n      console.error('âŒ Lá»—i khi láº¥y giá» hÃ ng:', error);\n      throw error;\n    }\n  },\n\n  // ThÃªm sáº£n pháº©m vÃ o giá» hÃ ng\n  addToCart: async (cartId, productId, quantity) => {\n    try {\n      let url;\n      if (cartId) {\n        // Náº¿u cÃ³ cartId, thÃªm vÃ o giá» hÃ ng hiá»‡n táº¡i\n        url = `/public/carts/${cartId}/products/${productId}/quantity/${quantity}`;\n      } else {\n        // Náº¿u khÃ´ng cÃ³ cartId, táº¡o giá» hÃ ng má»›i\n        // Sá»­ dá»¥ng endpoint khÃ¡c Ä‘á»ƒ táº¡o giá» hÃ ng má»›i\n        url = `/public/carts/products/${productId}/quantity/${quantity}`;\n      }\n      \n      console.log(\"ðŸ“¡ Gá»i API:\", url);\n      const response = await api.post(url);\n      return response.data;\n    } catch (error) {\n      console.error('âŒ Lá»—i khi thÃªm vÃ o giá» hÃ ng:', error);\n      console.error('ðŸ“Š Response data:', error.response?.data);\n      throw error;\n    }\n  },\n\n  // Táº¡o giá» hÃ ng má»›i\n  createCart: async (email) => {\n    try {\n      // Endpoint Ä‘á»ƒ táº¡o giá» hÃ ng má»›i - cÃ³ thá»ƒ cáº§n Ä‘iá»u chá»‰nh theo API thá»±c táº¿\n      const response = await api.post(`/api/public/users/${email}/carts`);\n      return response.data;\n    } catch (error) {\n      console.error('âŒ Lá»—i khi táº¡o giá» hÃ ng:', error);\n      throw error;\n    }\n  },\n\n  // Láº¥y hoáº·c táº¡o giá» hÃ ng active\n  getOrCreateActiveCart: async (email) => {\n    try {\n      // Thá»­ láº¥y giá» hÃ ng active\n      const cart = await cartService.getActiveCart(email);\n      return cart;\n    } catch (error) {\n      console.log('ðŸ“¦ KhÃ´ng cÃ³ giá» hÃ ng active, Ä‘ang táº¡o má»›i...');\n      // Náº¿u khÃ´ng cÃ³, táº¡o giá» hÃ ng má»›i\n      const newCart = await cartService.createCart(email);\n      return newCart;\n    }\n  },\n\n  // Cáº­p nháº­t sá»‘ lÆ°á»£ng sáº£n pháº©m\n  updateQuantity: async (cartId, productId, quantity) => {\n    try {\n      const response = await api.put(`/api/public/carts/${cartId}/products/${productId}/quantity/${quantity}`);\n      return response.data;\n    } catch (error) {\n      console.error('âŒ Lá»—i khi cáº­p nháº­t sá»‘ lÆ°á»£ng:', error);\n      throw error;\n    }\n  },\n\n  // XÃ³a sáº£n pháº©m khá»i giá» hÃ ng\n  removeFromCart: async (cartId, productId) => {\n    try {\n      const response = await api.delete(`/api/public/carts/${cartId}/products/${productId}`);\n      return response.data;\n    } catch (error) {\n      console.error('âŒ Lá»—i khi xÃ³a sáº£n pháº©m:', error);\n      throw error;\n    }\n  },\n\n  // Táº¡o Ä‘Æ¡n hÃ ng tá»« giá» hÃ ng\n  createOrder: async (email, cartId, paymentMethod) => {\n    try {\n      const response = await api.post(`/api/public/users/${email}/carts/${cartId}/payments/${paymentMethod}/order`);\n      return response.data;\n    } catch (error) {\n      console.error('âŒ Lá»—i khi táº¡o Ä‘Æ¡n hÃ ng:', error);\n      throw error;\n    }\n  },\n\n  // TÃ­nh tá»•ng tiá»n\n  calculateTotal: (cartItems) => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    \n    return cartItems.reduce((total, item) => {\n      const price = item.product?.price || 0;\n      return total + (price * item.quantity);\n    }, 0);\n  }\n};\n\nexport default cartService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}