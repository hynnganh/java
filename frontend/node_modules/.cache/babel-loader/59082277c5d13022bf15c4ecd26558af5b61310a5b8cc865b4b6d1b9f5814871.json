{"ast":null,"code":"// services/userService.js\nimport api from \"./api\";\nconst userService = {\n  // ==================== PUBLIC ENDPOINTS ====================\n\n  // üü¢ Public: L·∫•y th√¥ng tin user theo ID\n  // üü¢ Public: L·∫•y th√¥ng tin user theo ID - TH√äM DEBUG\n  async getUserById(userId) {\n    try {\n      console.log(`üì° Calling API: /public/users/${userId}`);\n      const response = await api.get(`/public/users/${userId}`);\n      console.log(\"üì® API Response:\", response);\n      console.log(\"üìä Response data:\", response.data);\n\n      // ‚úÖ Ki·ªÉm tra c·∫•u tr√∫c d·ªØ li·ªáu tr·∫£ v·ªÅ\n      if (response.data) {\n        console.log(\"üîç Data structure check:\", {\n          'hasFirst_name': !!response.data.first_name,\n          'hasFirstName': !!response.data.firstName,\n          'first_name value': response.data.first_name,\n          'firstName value': response.data.firstName,\n          'allKeys': Object.keys(response.data)\n        });\n      }\n      return response.data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y th√¥ng tin user:\", error);\n\n      // ‚úÖ Log chi ti·∫øt l·ªói\n      if (error.response) {\n        console.error(\"üö® Error response:\", {\n          status: error.response.status,\n          data: error.response.data\n        });\n      }\n      throw error;\n    }\n  },\n  // üü¢ Public: L·∫•y th√¥ng tin user theo email\n  async getUserByEmail(email) {\n    try {\n      const {\n        data\n      } = await api.get(`/public/users/email/${email}`);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y th√¥ng tin user b·∫±ng email:\", error);\n      throw error;\n    }\n  },\n  // üü¢ Public: C·∫≠p nh·∫≠t th√¥ng tin user\n  async updateUser(userId, userData) {\n    try {\n      const {\n        data\n      } = await api.put(`/public/users/${userId}`, userData);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi c·∫≠p nh·∫≠t user:\", error);\n      throw error;\n    }\n  },\n  // ==================== ADMIN ENDPOINTS ====================\n\n  // üîê Admin: L·∫•y t·∫•t c·∫£ users\n  async getAllUsers() {\n    try {\n      const {\n        data\n      } = await api.get(\"/admin/users\");\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y danh s√°ch users:\", error);\n      throw error;\n    }\n  },\n  // üîê Admin: X√≥a user\n  async deleteUser(userId) {\n    try {\n      const {\n        data\n      } = await api.delete(`/admin/users/${userId}`);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi x√≥a user:\", error);\n      throw error;\n    }\n  },\n  // ==================== UTILITY METHODS ====================\n\n  // üü¢ Ki·ªÉm tra xem user c√≥ t·ªìn t·∫°i kh√¥ng\n  async checkUserExists(userId) {\n    try {\n      await this.getUserById(userId);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  },\n  // üü¢ L·∫•y th√¥ng tin user profile ƒë·∫ßy ƒë·ªß\n  // üü¢ L·∫•y th√¥ng tin user profile ƒë·∫ßy ƒë·ªß - S·ª¨A L·∫†I\n  async getUserProfile(userId) {\n    try {\n      console.log(`üîç Getting user profile for ID: ${userId}`);\n      const userData = await this.getUserById(userId);\n      console.log(\"üìä Raw API response:\", userData);\n\n      // ‚úÖ X·ª≠ l√Ω d·ªØ li·ªáu tr·∫£ v·ªÅ - QUAN TR·ªåNG: Ki·ªÉm tra c·∫£ 2 d·∫°ng field name\n      const processedData = {\n        // Gi·ªØ nguy√™n to√†n b·ªô d·ªØ li·ªáu g·ªëc\n        ...userData,\n        // ‚úÖ ƒê·∫£m b·∫£o c√≥ c·∫£ 2 d·∫°ng field name ƒë·ªÉ component c√≥ th·ªÉ s·ª≠ d·ª•ng\n        userId: userData.user_id || userData.userId || userId,\n        user_id: userData.user_id || userData.userId || userId,\n        // ‚úÖ X·ª≠ l√Ω first_name/firstName\n        firstName: userData.first_name || userData.firstName,\n        first_name: userData.first_name || userData.firstName,\n        // ‚úÖ X·ª≠ l√Ω last_name/lastName  \n        lastName: userData.last_name || userData.lastName,\n        last_name: userData.last_name || userData.lastName,\n        // ‚úÖ C√°c field kh√°c\n        email: userData.email,\n        mobileNumber: userData.mobile_number || userData.mobileNumber,\n        mobile_number: userData.mobile_number || userData.mobileNumber,\n        // ‚úÖ Full name ƒë·ªÉ ti·ªán s·ª≠ d·ª•ng\n        fullName: `${userData.first_name || userData.firstName || ''} ${userData.last_name || userData.lastName || ''}`.trim()\n      };\n      console.log(\"‚úÖ Processed user profile:\", processedData);\n      console.log(\"üîç First name check:\", {\n        'first_name': processedData.first_name,\n        'firstName': processedData.firstName,\n        'hasFirstName': !!(processedData.first_name || processedData.firstName)\n      });\n      return processedData;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y user profile:\", error);\n      throw error;\n    }\n  },\n  // üü¢ C·∫≠p nh·∫≠t profile user\n  async updateUserProfile(userId, profileData) {\n    try {\n      // Format data ƒë·ªÉ g·ª≠i l√™n server\n      const formattedData = {\n        first_name: profileData.firstName || profileData.first_name,\n        last_name: profileData.lastName || profileData.last_name,\n        mobile_number: profileData.mobileNumber || profileData.mobile_number,\n        email: profileData.email\n      };\n      const result = await this.updateUser(userId, formattedData);\n      return result;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi c·∫≠p nh·∫≠t profile:\", error);\n      throw error;\n    }\n  }\n};\nexport default userService;","map":{"version":3,"names":["api","userService","getUserById","userId","console","log","response","get","data","first_name","firstName","Object","keys","error","status","getUserByEmail","email","updateUser","userData","put","getAllUsers","deleteUser","delete","checkUserExists","getUserProfile","processedData","user_id","lastName","last_name","mobileNumber","mobile_number","fullName","trim","updateUserProfile","profileData","formattedData","result"],"sources":["D:/JVA/frontend/src/services/userService.js"],"sourcesContent":["// services/userService.js\nimport api from \"./api\";\n\nconst userService = {\n  // ==================== PUBLIC ENDPOINTS ====================\n  \n  // üü¢ Public: L·∫•y th√¥ng tin user theo ID\n // üü¢ Public: L·∫•y th√¥ng tin user theo ID - TH√äM DEBUG\nasync getUserById(userId) {\n  try {\n    console.log(`üì° Calling API: /public/users/${userId}`);\n    const response = await api.get(`/public/users/${userId}`);\n    console.log(\"üì® API Response:\", response);\n    console.log(\"üìä Response data:\", response.data);\n    \n    // ‚úÖ Ki·ªÉm tra c·∫•u tr√∫c d·ªØ li·ªáu tr·∫£ v·ªÅ\n    if (response.data) {\n      console.log(\"üîç Data structure check:\", {\n        'hasFirst_name': !!response.data.first_name,\n        'hasFirstName': !!response.data.firstName,\n        'first_name value': response.data.first_name,\n        'firstName value': response.data.firstName,\n        'allKeys': Object.keys(response.data)\n      });\n    }\n    \n    return response.data;\n  } catch (error) {\n    console.error(\"‚ùå L·ªói khi l·∫•y th√¥ng tin user:\", error);\n    \n    // ‚úÖ Log chi ti·∫øt l·ªói\n    if (error.response) {\n      console.error(\"üö® Error response:\", {\n        status: error.response.status,\n        data: error.response.data\n      });\n    }\n    \n    throw error;\n  }\n},\n\n  // üü¢ Public: L·∫•y th√¥ng tin user theo email\n  async getUserByEmail(email) {\n    try {\n      const { data } = await api.get(`/public/users/email/${email}`);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y th√¥ng tin user b·∫±ng email:\", error);\n      throw error;\n    }\n  },\n\n  // üü¢ Public: C·∫≠p nh·∫≠t th√¥ng tin user\n  async updateUser(userId, userData) {\n    try {\n      const { data } = await api.put(`/public/users/${userId}`, userData);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi c·∫≠p nh·∫≠t user:\", error);\n      throw error;\n    }\n  },\n\n  // ==================== ADMIN ENDPOINTS ====================\n\n  // üîê Admin: L·∫•y t·∫•t c·∫£ users\n  async getAllUsers() {\n    try {\n      const { data } = await api.get(\"/admin/users\");\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y danh s√°ch users:\", error);\n      throw error;\n    }\n  },\n\n  // üîê Admin: X√≥a user\n  async deleteUser(userId) {\n    try {\n      const { data } = await api.delete(`/admin/users/${userId}`);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi x√≥a user:\", error);\n      throw error;\n    }\n  },\n\n  // ==================== UTILITY METHODS ====================\n\n  // üü¢ Ki·ªÉm tra xem user c√≥ t·ªìn t·∫°i kh√¥ng\n  async checkUserExists(userId) {\n    try {\n      await this.getUserById(userId);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  },\n\n  // üü¢ L·∫•y th√¥ng tin user profile ƒë·∫ßy ƒë·ªß\n // üü¢ L·∫•y th√¥ng tin user profile ƒë·∫ßy ƒë·ªß - S·ª¨A L·∫†I\nasync getUserProfile(userId) {\n  try {\n    console.log(`üîç Getting user profile for ID: ${userId}`);\n    const userData = await this.getUserById(userId);\n    \n    console.log(\"üìä Raw API response:\", userData);\n    \n    // ‚úÖ X·ª≠ l√Ω d·ªØ li·ªáu tr·∫£ v·ªÅ - QUAN TR·ªåNG: Ki·ªÉm tra c·∫£ 2 d·∫°ng field name\n    const processedData = {\n      // Gi·ªØ nguy√™n to√†n b·ªô d·ªØ li·ªáu g·ªëc\n      ...userData,\n      \n      // ‚úÖ ƒê·∫£m b·∫£o c√≥ c·∫£ 2 d·∫°ng field name ƒë·ªÉ component c√≥ th·ªÉ s·ª≠ d·ª•ng\n      userId: userData.user_id || userData.userId || userId,\n      user_id: userData.user_id || userData.userId || userId,\n      \n      // ‚úÖ X·ª≠ l√Ω first_name/firstName\n      firstName: userData.first_name || userData.firstName,\n      first_name: userData.first_name || userData.firstName,\n      \n      // ‚úÖ X·ª≠ l√Ω last_name/lastName  \n      lastName: userData.last_name || userData.lastName,\n      last_name: userData.last_name || userData.lastName,\n      \n      // ‚úÖ C√°c field kh√°c\n      email: userData.email,\n      mobileNumber: userData.mobile_number || userData.mobileNumber,\n      mobile_number: userData.mobile_number || userData.mobileNumber,\n      \n      // ‚úÖ Full name ƒë·ªÉ ti·ªán s·ª≠ d·ª•ng\n      fullName: `${userData.first_name || userData.firstName || ''} ${userData.last_name || userData.lastName || ''}`.trim()\n    };\n    \n    console.log(\"‚úÖ Processed user profile:\", processedData);\n    console.log(\"üîç First name check:\", {\n      'first_name': processedData.first_name,\n      'firstName': processedData.firstName,\n      'hasFirstName': !!(processedData.first_name || processedData.firstName)\n    });\n    \n    return processedData;\n  } catch (error) {\n    console.error(\"‚ùå L·ªói khi l·∫•y user profile:\", error);\n    throw error;\n  }\n},\n\n  // üü¢ C·∫≠p nh·∫≠t profile user\n  async updateUserProfile(userId, profileData) {\n    try {\n      // Format data ƒë·ªÉ g·ª≠i l√™n server\n      const formattedData = {\n        first_name: profileData.firstName || profileData.first_name,\n        last_name: profileData.lastName || profileData.last_name,\n        mobile_number: profileData.mobileNumber || profileData.mobile_number,\n        email: profileData.email\n      };\n\n      const result = await this.updateUser(userId, formattedData);\n      return result;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi c·∫≠p nh·∫≠t profile:\", error);\n      throw error;\n    }\n  }\n};\n\nexport default userService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}