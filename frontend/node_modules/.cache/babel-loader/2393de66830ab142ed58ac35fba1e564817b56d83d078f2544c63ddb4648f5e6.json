{"ast":null,"code":"// services/orderService.js\nimport api from './api';\nconst orderService = {\n  // Admin: Lấy danh sách tất cả đơn hàng\n  getAllOrders: async (page = 0, size = 10, sort = 'orderDate,desc') => {\n    try {\n      const response = await api.get('/admin/orders', {\n        params: {\n          page,\n          size,\n          sort\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi lấy danh sách đơn hàng:', error);\n      throw error;\n    }\n  },\n  // Admin: Cập nhật trạng thái đơn hàng\n  updateOrderStatus: async (emailId, orderId, orderStatus) => {\n    try {\n      const response = await api.put(`/admin/user=${emailId}/orders/${orderId}/orderStatus/${orderStatus}`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi cập nhật trạng thái đơn hàng:', error);\n      throw error;\n    }\n  },\n  // Public: Tạo đơn hàng mới từ giỏ hàng\n  createOrderFromCart: async (emailId, cartId, paymentMethod) => {\n    try {\n      const response = await api.post(`/public/user=${emailId}/carts/${cartId}/payments/${paymentMethod}/order`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi tạo đơn hàng từ giỏ hàng:', error);\n      throw error;\n    }\n  },\n  // Public: Lấy danh sách đơn hàng của user\n  getUserOrders: async (emailId, page = 0, size = 10) => {\n    try {\n      const response = await api.get(`/public/user=${emailId}/orders`, {\n        params: {\n          page,\n          size\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi lấy danh sách đơn hàng của user:', error);\n      throw error;\n    }\n  },\n  // Public: Lấy chi tiết đơn hàng cụ thể của user\n  getUserOrderDetail: async (emailId, orderId) => {\n    try {\n      const response = await api.get(`/public/user=${emailId}/orders/${orderId}`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi lấy chi tiết đơn hàng:', error);\n      throw error;\n    }\n  },\n  // Hàm tiện ích: Định dạng trạng thái đơn hàng\n  formatOrderStatus: status => {\n    const statusMap = {\n      'PENDING': 'Đang chờ xử lý',\n      'CONFIRMED': 'Đã xác nhận',\n      'PROCESSING': 'Đang xử lý',\n      'SHIPPED': 'Đã giao hàng',\n      'DELIVERED': 'Đã nhận hàng',\n      'CANCELLED': 'Đã hủy',\n      'REFUNDED': 'Đã hoàn tiền'\n    };\n    return statusMap[status] || status;\n  },\n  // Hàm tiện ích: Định dạng phương thức thanh toán\n  formatPaymentMethod: method => {\n    const methodMap = {\n      'CASH': 'Tiền mặt',\n      'CREDIT_CARD': 'Thẻ tín dụng',\n      'BANK_TRANSFER': 'Chuyển khoản',\n      'EWALLET': 'Ví điện tử'\n    };\n    return methodMap[method] || method;\n  },\n  // Hàm tiện ích: Tính tổng tiền đơn hàng\n  calculateOrderTotal: orderItems => {\n    if (!orderItems || orderItems.length === 0) return 0;\n    return orderItems.reduce((total, item) => {\n      const price = item.price || item.unitPrice || 0;\n      const quantity = item.quantity || 1;\n      return total + price * quantity;\n    }, 0);\n  },\n  // Hàm tiện ích: Kiểm tra đơn hàng có thể hủy không\n  canCancelOrder: orderStatus => {\n    const cancellableStatuses = ['PENDING', 'CONFIRMED'];\n    return cancellableStatuses.includes(orderStatus);\n  },\n  // Hàm tiện ích: Lọc đơn hàng theo trạng thái\n  filterOrdersByStatus: (orders, status) => {\n    if (!orders) return [];\n    if (!status) return orders;\n    return orders.filter(order => order.status === status);\n  },\n  // Hàm tiện ích: Sắp xếp đơn hàng theo ngày\n  sortOrdersByDate: (orders, ascending = false) => {\n    if (!orders) return [];\n    return [...orders].sort((a, b) => {\n      const dateA = new Date(a.orderDate || a.createdAt);\n      const dateB = new Date(b.orderDate || b.createdAt);\n      return ascending ? dateA - dateB : dateB - dateA;\n    });\n  }\n};\nexport default orderService;","map":{"version":3,"names":["api","orderService","getAllOrders","page","size","sort","response","get","params","data","error","console","updateOrderStatus","emailId","orderId","orderStatus","put","createOrderFromCart","cartId","paymentMethod","post","getUserOrders","getUserOrderDetail","formatOrderStatus","status","statusMap","formatPaymentMethod","method","methodMap","calculateOrderTotal","orderItems","length","reduce","total","item","price","unitPrice","quantity","canCancelOrder","cancellableStatuses","includes","filterOrdersByStatus","orders","filter","order","sortOrdersByDate","ascending","a","b","dateA","Date","orderDate","createdAt","dateB"],"sources":["D:/JVA/frontend/src/services/orderService.js"],"sourcesContent":["// services/orderService.js\nimport api from './api';\n\nconst orderService = {\n  // Admin: Lấy danh sách tất cả đơn hàng\n  getAllOrders: async (page = 0, size = 10, sort = 'orderDate,desc') => {\n    try {\n      const response = await api.get('/admin/orders', {\n        params: { page, size, sort }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi lấy danh sách đơn hàng:', error);\n      throw error;\n    }\n  },\n\n  // Admin: Cập nhật trạng thái đơn hàng\n  updateOrderStatus: async (emailId, orderId, orderStatus) => {\n    try {\n      const response = await api.put(\n        `/admin/user=${emailId}/orders/${orderId}/orderStatus/${orderStatus}`\n      );\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi cập nhật trạng thái đơn hàng:', error);\n      throw error;\n    }\n  },\n\n  // Public: Tạo đơn hàng mới từ giỏ hàng\n  createOrderFromCart: async (emailId, cartId, paymentMethod) => {\n    try {\n      const response = await api.post(\n        `/public/user=${emailId}/carts/${cartId}/payments/${paymentMethod}/order`\n      );\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi tạo đơn hàng từ giỏ hàng:', error);\n      throw error;\n    }\n  },\n\n  // Public: Lấy danh sách đơn hàng của user\n  getUserOrders: async (emailId, page = 0, size = 10) => {\n    try {\n      const response = await api.get(`/public/user=${emailId}/orders`, {\n        params: { page, size }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi lấy danh sách đơn hàng của user:', error);\n      throw error;\n    }\n  },\n\n  // Public: Lấy chi tiết đơn hàng cụ thể của user\n  getUserOrderDetail: async (emailId, orderId) => {\n    try {\n      const response = await api.get(\n        `/public/user=${emailId}/orders/${orderId}`\n      );\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi lấy chi tiết đơn hàng:', error);\n      throw error;\n    }\n  },\n\n  // Hàm tiện ích: Định dạng trạng thái đơn hàng\n  formatOrderStatus: (status) => {\n    const statusMap = {\n      'PENDING': 'Đang chờ xử lý',\n      'CONFIRMED': 'Đã xác nhận',\n      'PROCESSING': 'Đang xử lý',\n      'SHIPPED': 'Đã giao hàng',\n      'DELIVERED': 'Đã nhận hàng',\n      'CANCELLED': 'Đã hủy',\n      'REFUNDED': 'Đã hoàn tiền'\n    };\n    return statusMap[status] || status;\n  },\n\n  // Hàm tiện ích: Định dạng phương thức thanh toán\n  formatPaymentMethod: (method) => {\n    const methodMap = {\n      'CASH': 'Tiền mặt',\n      'CREDIT_CARD': 'Thẻ tín dụng',\n      'BANK_TRANSFER': 'Chuyển khoản',\n      'EWALLET': 'Ví điện tử'\n    };\n    return methodMap[method] || method;\n  },\n\n  // Hàm tiện ích: Tính tổng tiền đơn hàng\n  calculateOrderTotal: (orderItems) => {\n    if (!orderItems || orderItems.length === 0) return 0;\n    return orderItems.reduce((total, item) => {\n      const price = item.price || item.unitPrice || 0;\n      const quantity = item.quantity || 1;\n      return total + (price * quantity);\n    }, 0);\n  },\n\n  // Hàm tiện ích: Kiểm tra đơn hàng có thể hủy không\n  canCancelOrder: (orderStatus) => {\n    const cancellableStatuses = ['PENDING', 'CONFIRMED'];\n    return cancellableStatuses.includes(orderStatus);\n  },\n\n  // Hàm tiện ích: Lọc đơn hàng theo trạng thái\n  filterOrdersByStatus: (orders, status) => {\n    if (!orders) return [];\n    if (!status) return orders;\n    return orders.filter(order => order.status === status);\n  },\n\n  // Hàm tiện ích: Sắp xếp đơn hàng theo ngày\n  sortOrdersByDate: (orders, ascending = false) => {\n    if (!orders) return [];\n    return [...orders].sort((a, b) => {\n      const dateA = new Date(a.orderDate || a.createdAt);\n      const dateB = new Date(b.orderDate || b.createdAt);\n      return ascending ? dateA - dateB : dateB - dateA;\n    });\n  }\n};\n\nexport default orderService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}