{"ast":null,"code":"// services/cartService.js\nimport api from './api';\nconst cartService = {\n  // ========== CART MANAGEMENT ==========\n\n  // T·∫°o gi·ªè h√†ng m·ªõi\n  createCart: async email => {\n    try {\n      const response = await api.post(`/public/users/${email}/carts`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi t·∫°o gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n  // L·∫•y gi·ªè h√†ng active\n  getActiveCart: async email => {\n    try {\n      const response = await api.get(`/public/users/${email}/carts/active`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n  // L·∫•y gi·ªè h√†ng theo ID\n  getCart: async (email, cartId) => {\n    try {\n      const response = await api.get(`/public/users/${email}/carts/${cartId}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n  // Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng\n  addToCart: async (cartId, productId, quantity = 1) => {\n    try {\n      const response = await api.post(`/public/carts/${cartId}/products/${productId}/quantity/${quantity}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi th√™m v√†o gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n  // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng\n  updateQuantity: async (cartId, productId, quantity) => {\n    try {\n      const response = await api.put(`/public/carts/${cartId}/products/${productId}/quantity/${quantity}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng:', error);\n      throw error;\n    }\n  },\n  // X√≥a s·∫£n ph·∫©m\n  removeFromCart: async (cartId, productId) => {\n    try {\n      const response = await api.delete(`/public/carts/${cartId}/products/${productId}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi x√≥a s·∫£n ph·∫©m:', error);\n      throw error;\n    }\n  },\n  // ========== LOCAL STORAGE METHODS ==========\n\n  // L·∫•y gi·ªè h√†ng t·ª´ localStorage\n  getCartFromStorage: () => {\n    try {\n      const cart = localStorage.getItem('cart');\n      return cart ? JSON.parse(cart) : null;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng t·ª´ localStorage:', error);\n      return null;\n    }\n  },\n  // L·∫•y s·ªë l∆∞·ª£ng s·∫£n ph·∫©m t·ª´ localStorage\n  getCartCountFromStorage: () => {\n    try {\n      const cart = localStorage.getItem('cart');\n      if (!cart) return 0;\n      const cartData = JSON.parse(cart);\n      if (!cartData.products || !Array.isArray(cartData.products)) return 0;\n      return cartData.products.reduce((total, item) => total + (item.quantity || 1), 0);\n    } catch (error) {\n      console.error('‚ùå L·ªói khi ƒë·∫øm s·∫£n ph·∫©m t·ª´ localStorage:', error);\n      return 0;\n    }\n  },\n  // L∆∞u gi·ªè h√†ng v√†o localStorage\n  saveCartToStorage: cart => {\n    try {\n      localStorage.setItem('cart', JSON.stringify(cart));\n      return true;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l∆∞u gi·ªè h√†ng v√†o localStorage:', error);\n      return false;\n    }\n  },\n  // X√≥a gi·ªè h√†ng t·ª´ localStorage\n  clearCartFromStorage: () => {\n    try {\n      localStorage.removeItem('cart');\n      return true;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi x√≥a gi·ªè h√†ng t·ª´ localStorage:', error);\n      return false;\n    }\n  },\n  // ========== ADMIN CART MANAGEMENT ==========\n\n  // L·∫•y t·∫•t c·∫£ gi·ªè h√†ng (ADMIN)\n  getAllCarts: async () => {\n    try {\n      const response = await api.get('/admin/carts');\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y t·∫•t c·∫£ gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n  // L·∫•y chi ti·∫øt gi·ªè h√†ng theo ID (ADMIN)\n  getCartByIdForAdmin: async cartId => {\n    try {\n      const response = await api.get(`/admin/carts/${cartId}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y chi ti·∫øt gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n  // L·∫•y gi·ªè h√†ng c·ªßa user c·ª• th·ªÉ (ADMIN)\n  getUserCarts: async userEmail => {\n    try {\n      const response = await api.get(`/admin/users/${userEmail}/carts`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng c·ªßa user:', error);\n      throw error;\n    }\n  },\n  // ========== ORDER MANAGEMENT ==========\n\n  // T·∫°o ƒë∆°n h√†ng v·ªõi shipping address\n  createOrder: async (email, cartId, paymentMethod, shippingAddress) => {\n    try {\n      console.log('üõí Creating order with:', {\n        email,\n        cartId,\n        paymentMethod,\n        shippingAddress\n      });\n      const response = await api.post(`/public/users/${email}/carts/${cartId}/place-order`, null, {\n        params: {\n          paymentMethod: paymentMethod,\n          shippingAddress: shippingAddress\n        }\n      });\n      console.log('‚úÖ Order created successfully:', response.data);\n      return response.data;\n    } catch (error) {\n      var _error$response, _error$response2, _error$config;\n      console.error('‚ùå Order creation failed:', error);\n      console.error('üî¥ Error details:', {\n        status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n        data: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data,\n        message: error.message,\n        url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url\n      });\n      throw error;\n    }\n  },\n  // ========== CART ANALYSIS ==========\n\n  // Ph√¢n t√≠ch gi·ªè h√†ng - th·ªëng k√™ s·∫£n ph·∫©m\n  analyzeCart: cart => {\n    if (!cart || !cart.products) return null;\n    const analysis = {\n      totalItems: 0,\n      totalValue: 0,\n      productCount: cart.products.length,\n      itemsByCategory: {},\n      mostExpensiveItem: null,\n      cheapestItem: null\n    };\n    cart.products.forEach(item => {\n      var _item$category;\n      const quantity = item.quantity || 1;\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const totalValue = price * quantity;\n\n      // T·ªïng s·ªë l∆∞·ª£ng s·∫£n ph·∫©m\n      analysis.totalItems += quantity;\n\n      // T·ªïng gi√° tr·ªã\n      analysis.totalValue += totalValue;\n\n      // Ph√¢n lo·∫°i theo category\n      const category = ((_item$category = item.category) === null || _item$category === void 0 ? void 0 : _item$category.categoryName) || 'Kh√¥ng ph√¢n lo·∫°i';\n      if (!analysis.itemsByCategory[category]) {\n        analysis.itemsByCategory[category] = {\n          count: 0,\n          value: 0,\n          items: []\n        };\n      }\n      analysis.itemsByCategory[category].count += quantity;\n      analysis.itemsByCategory[category].value += totalValue;\n      analysis.itemsByCategory[category].items.push(item);\n\n      // S·∫£n ph·∫©m ƒë·∫Øt nh·∫•t\n      if (!analysis.mostExpensiveItem || price > analysis.mostExpensiveItem.price) {\n        analysis.mostExpensiveItem = {\n          productId: item.productId,\n          productName: item.productName,\n          price: price,\n          quantity: quantity,\n          totalValue: totalValue\n        };\n      }\n\n      // S·∫£n ph·∫©m r·∫ª nh·∫•t\n      if (!analysis.cheapestItem || price < analysis.cheapestItem.price) {\n        analysis.cheapestItem = {\n          productId: item.productId,\n          productName: item.productName,\n          price: price,\n          quantity: quantity,\n          totalValue: totalValue\n        };\n      }\n    });\n    return analysis;\n  },\n  // L·∫•y th·ªëng k√™ t·ªïng quan gi·ªè h√†ng\n  getCartStatistics: cart => {\n    if (!cart) return null;\n    const analysis = cartService.analyzeCart(cart);\n    if (!analysis) return null;\n    return {\n      cartId: cart.cartId,\n      userId: cart.userId,\n      userEmail: cart.userEmail,\n      totalProducts: analysis.productCount,\n      totalItems: analysis.totalItems,\n      totalValue: analysis.totalValue,\n      averageItemValue: analysis.totalItems > 0 ? analysis.totalValue / analysis.totalItems : 0,\n      categories: Object.keys(analysis.itemsByCategory).length,\n      mostExpensiveProduct: analysis.mostExpensiveItem,\n      cheapestProduct: analysis.cheapestItem\n    };\n  },\n  // ========== CART ITEMS UTILITIES ==========\n\n  // T√¨m s·∫£n ph·∫©m trong gi·ªè h√†ng\n  findProductInCart: (cart, productId) => {\n    if (!cart || !cart.products) return null;\n    return cart.products.find(item => item.productId === productId);\n  },\n  // Ki·ªÉm tra s·∫£n ph·∫©m c√≥ trong gi·ªè h√†ng kh√¥ng\n  isProductInCart: (cart, productId) => {\n    return cartService.findProductInCart(cart, productId) !== null;\n  },\n  // L·∫•y s·ªë l∆∞·ª£ng s·∫£n ph·∫©m c·ª• th·ªÉ\n  getProductQuantity: (cart, productId) => {\n    const product = cartService.findProductInCart(cart, productId);\n    return product ? product.quantity || 1 : 0;\n  },\n  // ========== PRICE CALCULATIONS ==========\n\n  // T√≠nh t·ªïng ti·ªÅn c·ªßa gi·ªè h√†ng\n  calculateTotal: cartItems => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const quantity = item.quantity || 1;\n      return total + price * quantity;\n    }, 0);\n  },\n  // T√≠nh t·ªïng ti·ªÅn sau discount\n  calculateDiscountedTotal: cartItems => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      const originalPrice = item.price || 0;\n      const discountedPrice = item.specialPrice || originalPrice;\n      const quantity = item.quantity || 1;\n      return total + discountedPrice * quantity;\n    }, 0);\n  },\n  // T√≠nh t·ªïng s·ªë ti·ªÅn discount\n  calculateTotalDiscount: cartItems => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      const originalPrice = item.price || 0;\n      const discountedPrice = item.specialPrice || originalPrice;\n      const quantity = item.quantity || 1;\n      const discountAmount = (originalPrice - discountedPrice) * quantity;\n      return total + Math.max(0, discountAmount);\n    }, 0);\n  },\n  // ========== FORMATTING ==========\n\n  // Format price hi·ªÉn th·ªã\n  formatPrice: price => {\n    return (Number(price) || 0).toLocaleString('vi-VN', {\n      style: 'currency',\n      currency: 'VND'\n    });\n  },\n  // Format s·ªë l∆∞·ª£ng\n  formatQuantity: quantity => {\n    return quantity || 1;\n  },\n  // ========== CART VALIDATION ==========\n\n  // Ki·ªÉm tra gi·ªè h√†ng h·ª£p l·ªá\n  validateCart: cart => {\n    if (!cart) return {\n      isValid: false,\n      message: 'Gi·ªè h√†ng kh√¥ng t·ªìn t·∫°i'\n    };\n    if (!cart.products || cart.products.length === 0) {\n      return {\n        isValid: false,\n        message: 'Gi·ªè h√†ng tr·ªëng'\n      };\n    }\n    const errors = [];\n    let totalCalculated = 0;\n    cart.products.forEach((item, index) => {\n      if (!item.productId) {\n        errors.push(`S·∫£n ph·∫©m th·ª© ${index + 1} kh√¥ng c√≥ ID`);\n      }\n      if (!item.productName) {\n        errors.push(`S·∫£n ph·∫©m th·ª© ${index + 1} kh√¥ng c√≥ t√™n`);\n      }\n      if (!item.quantity || item.quantity < 1) {\n        errors.push(`S·∫£n ph·∫©m \"${item.productName}\" c√≥ s·ªë l∆∞·ª£ng kh√¥ng h·ª£p l·ªá`);\n      }\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const quantity = item.quantity || 1;\n      totalCalculated += price * quantity;\n    });\n\n    // Ki·ªÉm tra t·ªïng ti·ªÅn kh·ªõp\n    const cartTotal = cart.totalPrice || 0;\n    if (Math.abs(totalCalculated - cartTotal) > 1) {\n      errors.push(`T·ªïng ti·ªÅn kh√¥ng kh·ªõp: ${cartTotal} vs ${totalCalculated}`);\n    }\n    return {\n      isValid: errors.length === 0,\n      message: errors.length === 0 ? 'Gi·ªè h√†ng h·ª£p l·ªá' : errors.join(', '),\n      errors: errors,\n      calculatedTotal: totalCalculated,\n      cartTotal: cartTotal\n    };\n  },\n  // ========== EXPORT DATA ==========\n\n  // Xu·∫•t d·ªØ li·ªáu gi·ªè h√†ng ƒë·ªÉ hi·ªÉn th·ªã\n  exportCartData: cart => {\n    var _cart$products;\n    if (!cart) return null;\n    const analysis = cartService.analyzeCart(cart);\n    const validation = cartService.validateCart(cart);\n    return {\n      basicInfo: {\n        cartId: cart.cartId,\n        userId: cart.userId,\n        userEmail: cart.userEmail,\n        totalPrice: cart.totalPrice,\n        createdAt: cart.createdAt,\n        isActive: cart.isActive\n      },\n      products: ((_cart$products = cart.products) === null || _cart$products === void 0 ? void 0 : _cart$products.map(item => {\n        var _item$category2;\n        return {\n          productId: item.productId,\n          productName: item.productName,\n          image: item.image,\n          price: item.price,\n          specialPrice: item.specialPrice,\n          productPrice: item.productPrice,\n          discount: item.discount,\n          quantity: item.quantity,\n          category: (_item$category2 = item.category) === null || _item$category2 === void 0 ? void 0 : _item$category2.categoryName,\n          totalValue: (item.productPrice || item.specialPrice || item.price || 0) * (item.quantity || 1)\n        };\n      })) || [],\n      statistics: analysis,\n      validation: validation\n    };\n  },\n  // ========== CART COMPARISON ==========\n\n  // So s√°nh hai gi·ªè h√†ng\n  compareCarts: (cart1, cart2) => {\n    const products1 = (cart1 === null || cart1 === void 0 ? void 0 : cart1.products) || [];\n    const products2 = (cart2 === null || cart2 === void 0 ? void 0 : cart2.products) || [];\n    const differences = {\n      added: [],\n      removed: [],\n      changed: []\n    };\n\n    // T√¨m s·∫£n ph·∫©m m·ªõi ƒë∆∞·ª£c th√™m\n    products2.forEach(product2 => {\n      const existingProduct = products1.find(p1 => p1.productId === product2.productId);\n      if (!existingProduct) {\n        differences.added.push(product2);\n      }\n    });\n\n    // T√¨m s·∫£n ph·∫©m b·ªã x√≥a\n    products1.forEach(product1 => {\n      const existingProduct = products2.find(p2 => p2.productId === product1.productId);\n      if (!existingProduct) {\n        differences.removed.push(product1);\n      }\n    });\n\n    // T√¨m s·∫£n ph·∫©m thay ƒë·ªïi s·ªë l∆∞·ª£ng\n    products1.forEach(product1 => {\n      const product2 = products2.find(p2 => p2.productId === product1.productId);\n      if (product2 && product1.quantity !== product2.quantity) {\n        differences.changed.push({\n          productId: product1.productId,\n          productName: product1.productName,\n          oldQuantity: product1.quantity,\n          newQuantity: product2.quantity,\n          change: product2.quantity - product1.quantity\n        });\n      }\n    });\n    return differences;\n  }\n};\nexport default cartService;","map":{"version":3,"names":["api","cartService","createCart","email","response","post","data","error","console","getActiveCart","get","getCart","cartId","addToCart","productId","quantity","updateQuantity","put","removeFromCart","delete","getCartFromStorage","cart","localStorage","getItem","JSON","parse","getCartCountFromStorage","cartData","products","Array","isArray","reduce","total","item","saveCartToStorage","setItem","stringify","clearCartFromStorage","removeItem","getAllCarts","getCartByIdForAdmin","getUserCarts","userEmail","createOrder","paymentMethod","shippingAddress","log","params","_error$response","_error$response2","_error$config","status","message","url","config","analyzeCart","analysis","totalItems","totalValue","productCount","length","itemsByCategory","mostExpensiveItem","cheapestItem","forEach","_item$category","price","productPrice","specialPrice","category","categoryName","count","value","items","push","productName","getCartStatistics","userId","totalProducts","averageItemValue","categories","Object","keys","mostExpensiveProduct","cheapestProduct","findProductInCart","find","isProductInCart","getProductQuantity","product","calculateTotal","cartItems","calculateDiscountedTotal","originalPrice","discountedPrice","calculateTotalDiscount","discountAmount","Math","max","formatPrice","Number","toLocaleString","style","currency","formatQuantity","validateCart","isValid","errors","totalCalculated","index","cartTotal","totalPrice","abs","join","calculatedTotal","exportCartData","_cart$products","validation","basicInfo","createdAt","isActive","map","_item$category2","image","discount","statistics","compareCarts","cart1","cart2","products1","products2","differences","added","removed","changed","product2","existingProduct","p1","product1","p2","oldQuantity","newQuantity","change"],"sources":["D:/JVA/frontend/src/services/cartService.js"],"sourcesContent":["// services/cartService.js\nimport api from './api';\n\nconst cartService = {\n  // ========== CART MANAGEMENT ==========\n\n  // T·∫°o gi·ªè h√†ng m·ªõi\n  createCart: async (email) => {\n    try {\n      const response = await api.post(`/public/users/${email}/carts`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi t·∫°o gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n\n  // L·∫•y gi·ªè h√†ng active\n  getActiveCart: async (email) => {\n    try {\n      const response = await api.get(`/public/users/${email}/carts/active`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n\n  // L·∫•y gi·ªè h√†ng theo ID\n  getCart: async (email, cartId) => {\n    try {\n      const response = await api.get(`/public/users/${email}/carts/${cartId}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n\n  // Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng\n  addToCart: async (cartId, productId, quantity = 1) => {\n    try {\n      const response = await api.post(`/public/carts/${cartId}/products/${productId}/quantity/${quantity}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi th√™m v√†o gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n\n  // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng\n  updateQuantity: async (cartId, productId, quantity) => {\n    try {\n      const response = await api.put(`/public/carts/${cartId}/products/${productId}/quantity/${quantity}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng:', error);\n      throw error;\n    }\n  },\n\n  // X√≥a s·∫£n ph·∫©m\n  removeFromCart: async (cartId, productId) => {\n    try {\n      const response = await api.delete(`/public/carts/${cartId}/products/${productId}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi x√≥a s·∫£n ph·∫©m:', error);\n      throw error;\n    }\n  },\n\n  // ========== LOCAL STORAGE METHODS ==========\n\n  // L·∫•y gi·ªè h√†ng t·ª´ localStorage\n  getCartFromStorage: () => {\n    try {\n      const cart = localStorage.getItem('cart');\n      return cart ? JSON.parse(cart) : null;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng t·ª´ localStorage:', error);\n      return null;\n    }\n  },\n\n  // L·∫•y s·ªë l∆∞·ª£ng s·∫£n ph·∫©m t·ª´ localStorage\n  getCartCountFromStorage: () => {\n    try {\n      const cart = localStorage.getItem('cart');\n      if (!cart) return 0;\n      \n      const cartData = JSON.parse(cart);\n      if (!cartData.products || !Array.isArray(cartData.products)) return 0;\n      \n      return cartData.products.reduce((total, item) => total + (item.quantity || 1), 0);\n    } catch (error) {\n      console.error('‚ùå L·ªói khi ƒë·∫øm s·∫£n ph·∫©m t·ª´ localStorage:', error);\n      return 0;\n    }\n  },\n\n  // L∆∞u gi·ªè h√†ng v√†o localStorage\n  saveCartToStorage: (cart) => {\n    try {\n      localStorage.setItem('cart', JSON.stringify(cart));\n      return true;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l∆∞u gi·ªè h√†ng v√†o localStorage:', error);\n      return false;\n    }\n  },\n\n  // X√≥a gi·ªè h√†ng t·ª´ localStorage\n  clearCartFromStorage: () => {\n    try {\n      localStorage.removeItem('cart');\n      return true;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi x√≥a gi·ªè h√†ng t·ª´ localStorage:', error);\n      return false;\n    }\n  },\n\n  // ========== ADMIN CART MANAGEMENT ==========\n\n  // L·∫•y t·∫•t c·∫£ gi·ªè h√†ng (ADMIN)\n  getAllCarts: async () => {\n    try {\n      const response = await api.get('/admin/carts');\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y t·∫•t c·∫£ gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n\n  // L·∫•y chi ti·∫øt gi·ªè h√†ng theo ID (ADMIN)\n  getCartByIdForAdmin: async (cartId) => {\n    try {\n      const response = await api.get(`/admin/carts/${cartId}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y chi ti·∫øt gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n\n  // L·∫•y gi·ªè h√†ng c·ªßa user c·ª• th·ªÉ (ADMIN)\n  getUserCarts: async (userEmail) => {\n    try {\n      const response = await api.get(`/admin/users/${userEmail}/carts`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng c·ªßa user:', error);\n      throw error;\n    }\n  },\n\n  // ========== ORDER MANAGEMENT ==========\n\n  // T·∫°o ƒë∆°n h√†ng v·ªõi shipping address\n  createOrder: async (email, cartId, paymentMethod, shippingAddress) => {\n    try {\n      console.log('üõí Creating order with:', { email, cartId, paymentMethod, shippingAddress });\n      \n      const response = await api.post(\n        `/public/users/${email}/carts/${cartId}/place-order`,\n        null,\n        {\n          params: {\n            paymentMethod: paymentMethod,\n            shippingAddress: shippingAddress\n          }\n        }\n      );\n      \n      console.log('‚úÖ Order created successfully:', response.data);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå Order creation failed:', error);\n      console.error('üî¥ Error details:', {\n        status: error.response?.status,\n        data: error.response?.data,\n        message: error.message,\n        url: error.config?.url\n      });\n      throw error;\n    }\n  },\n\n  // ========== CART ANALYSIS ==========\n\n  // Ph√¢n t√≠ch gi·ªè h√†ng - th·ªëng k√™ s·∫£n ph·∫©m\n  analyzeCart: (cart) => {\n    if (!cart || !cart.products) return null;\n\n    const analysis = {\n      totalItems: 0,\n      totalValue: 0,\n      productCount: cart.products.length,\n      itemsByCategory: {},\n      mostExpensiveItem: null,\n      cheapestItem: null\n    };\n\n    cart.products.forEach(item => {\n      const quantity = item.quantity || 1;\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const totalValue = price * quantity;\n\n      // T·ªïng s·ªë l∆∞·ª£ng s·∫£n ph·∫©m\n      analysis.totalItems += quantity;\n      \n      // T·ªïng gi√° tr·ªã\n      analysis.totalValue += totalValue;\n\n      // Ph√¢n lo·∫°i theo category\n      const category = item.category?.categoryName || 'Kh√¥ng ph√¢n lo·∫°i';\n      if (!analysis.itemsByCategory[category]) {\n        analysis.itemsByCategory[category] = {\n          count: 0,\n          value: 0,\n          items: []\n        };\n      }\n      analysis.itemsByCategory[category].count += quantity;\n      analysis.itemsByCategory[category].value += totalValue;\n      analysis.itemsByCategory[category].items.push(item);\n\n      // S·∫£n ph·∫©m ƒë·∫Øt nh·∫•t\n      if (!analysis.mostExpensiveItem || price > analysis.mostExpensiveItem.price) {\n        analysis.mostExpensiveItem = {\n          productId: item.productId,\n          productName: item.productName,\n          price: price,\n          quantity: quantity,\n          totalValue: totalValue\n        };\n      }\n\n      // S·∫£n ph·∫©m r·∫ª nh·∫•t\n      if (!analysis.cheapestItem || price < analysis.cheapestItem.price) {\n        analysis.cheapestItem = {\n          productId: item.productId,\n          productName: item.productName,\n          price: price,\n          quantity: quantity,\n          totalValue: totalValue\n        };\n      }\n    });\n\n    return analysis;\n  },\n\n  // L·∫•y th·ªëng k√™ t·ªïng quan gi·ªè h√†ng\n  getCartStatistics: (cart) => {\n    if (!cart) return null;\n\n    const analysis = cartService.analyzeCart(cart);\n    if (!analysis) return null;\n\n    return {\n      cartId: cart.cartId,\n      userId: cart.userId,\n      userEmail: cart.userEmail,\n      totalProducts: analysis.productCount,\n      totalItems: analysis.totalItems,\n      totalValue: analysis.totalValue,\n      averageItemValue: analysis.totalItems > 0 ? analysis.totalValue / analysis.totalItems : 0,\n      categories: Object.keys(analysis.itemsByCategory).length,\n      mostExpensiveProduct: analysis.mostExpensiveItem,\n      cheapestProduct: analysis.cheapestItem\n    };\n  },\n\n  // ========== CART ITEMS UTILITIES ==========\n\n  // T√¨m s·∫£n ph·∫©m trong gi·ªè h√†ng\n  findProductInCart: (cart, productId) => {\n    if (!cart || !cart.products) return null;\n    return cart.products.find(item => item.productId === productId);\n  },\n\n  // Ki·ªÉm tra s·∫£n ph·∫©m c√≥ trong gi·ªè h√†ng kh√¥ng\n  isProductInCart: (cart, productId) => {\n    return cartService.findProductInCart(cart, productId) !== null;\n  },\n\n  // L·∫•y s·ªë l∆∞·ª£ng s·∫£n ph·∫©m c·ª• th·ªÉ\n  getProductQuantity: (cart, productId) => {\n    const product = cartService.findProductInCart(cart, productId);\n    return product ? (product.quantity || 1) : 0;\n  },\n\n  // ========== PRICE CALCULATIONS ==========\n\n  // T√≠nh t·ªïng ti·ªÅn c·ªßa gi·ªè h√†ng\n  calculateTotal: (cartItems) => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const quantity = item.quantity || 1;\n      return total + (price * quantity);\n    }, 0);\n  },\n\n  // T√≠nh t·ªïng ti·ªÅn sau discount\n  calculateDiscountedTotal: (cartItems) => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      const originalPrice = item.price || 0;\n      const discountedPrice = item.specialPrice || originalPrice;\n      const quantity = item.quantity || 1;\n      return total + (discountedPrice * quantity);\n    }, 0);\n  },\n\n  // T√≠nh t·ªïng s·ªë ti·ªÅn discount\n  calculateTotalDiscount: (cartItems) => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      const originalPrice = item.price || 0;\n      const discountedPrice = item.specialPrice || originalPrice;\n      const quantity = item.quantity || 1;\n      const discountAmount = (originalPrice - discountedPrice) * quantity;\n      return total + Math.max(0, discountAmount);\n    }, 0);\n  },\n\n  // ========== FORMATTING ==========\n\n  // Format price hi·ªÉn th·ªã\n  formatPrice: (price) => {\n    return (Number(price) || 0).toLocaleString('vi-VN', {\n      style: 'currency',\n      currency: 'VND'\n    });\n  },\n\n  // Format s·ªë l∆∞·ª£ng\n  formatQuantity: (quantity) => {\n    return quantity || 1;\n  },\n\n  // ========== CART VALIDATION ==========\n\n  // Ki·ªÉm tra gi·ªè h√†ng h·ª£p l·ªá\n  validateCart: (cart) => {\n    if (!cart) return { isValid: false, message: 'Gi·ªè h√†ng kh√¥ng t·ªìn t·∫°i' };\n    if (!cart.products || cart.products.length === 0) {\n      return { isValid: false, message: 'Gi·ªè h√†ng tr·ªëng' };\n    }\n\n    const errors = [];\n    let totalCalculated = 0;\n\n    cart.products.forEach((item, index) => {\n      if (!item.productId) {\n        errors.push(`S·∫£n ph·∫©m th·ª© ${index + 1} kh√¥ng c√≥ ID`);\n      }\n      if (!item.productName) {\n        errors.push(`S·∫£n ph·∫©m th·ª© ${index + 1} kh√¥ng c√≥ t√™n`);\n      }\n      if (!item.quantity || item.quantity < 1) {\n        errors.push(`S·∫£n ph·∫©m \"${item.productName}\" c√≥ s·ªë l∆∞·ª£ng kh√¥ng h·ª£p l·ªá`);\n      }\n\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const quantity = item.quantity || 1;\n      totalCalculated += price * quantity;\n    });\n\n    // Ki·ªÉm tra t·ªïng ti·ªÅn kh·ªõp\n    const cartTotal = cart.totalPrice || 0;\n    if (Math.abs(totalCalculated - cartTotal) > 1) {\n      errors.push(`T·ªïng ti·ªÅn kh√¥ng kh·ªõp: ${cartTotal} vs ${totalCalculated}`);\n    }\n\n    return {\n      isValid: errors.length === 0,\n      message: errors.length === 0 ? 'Gi·ªè h√†ng h·ª£p l·ªá' : errors.join(', '),\n      errors: errors,\n      calculatedTotal: totalCalculated,\n      cartTotal: cartTotal\n    };\n  },\n\n  // ========== EXPORT DATA ==========\n\n  // Xu·∫•t d·ªØ li·ªáu gi·ªè h√†ng ƒë·ªÉ hi·ªÉn th·ªã\n  exportCartData: (cart) => {\n    if (!cart) return null;\n\n    const analysis = cartService.analyzeCart(cart);\n    const validation = cartService.validateCart(cart);\n\n    return {\n      basicInfo: {\n        cartId: cart.cartId,\n        userId: cart.userId,\n        userEmail: cart.userEmail,\n        totalPrice: cart.totalPrice,\n        createdAt: cart.createdAt,\n        isActive: cart.isActive\n      },\n      products: cart.products?.map(item => ({\n        productId: item.productId,\n        productName: item.productName,\n        image: item.image,\n        price: item.price,\n        specialPrice: item.specialPrice,\n        productPrice: item.productPrice,\n        discount: item.discount,\n        quantity: item.quantity,\n        category: item.category?.categoryName,\n        totalValue: (item.productPrice || item.specialPrice || item.price || 0) * (item.quantity || 1)\n      })) || [],\n      statistics: analysis,\n      validation: validation\n    };\n  },\n\n  // ========== CART COMPARISON ==========\n\n  // So s√°nh hai gi·ªè h√†ng\n  compareCarts: (cart1, cart2) => {\n    const products1 = cart1?.products || [];\n    const products2 = cart2?.products || [];\n\n    const differences = {\n      added: [],\n      removed: [],\n      changed: []\n    };\n\n    // T√¨m s·∫£n ph·∫©m m·ªõi ƒë∆∞·ª£c th√™m\n    products2.forEach(product2 => {\n      const existingProduct = products1.find(p1 => p1.productId === product2.productId);\n      if (!existingProduct) {\n        differences.added.push(product2);\n      }\n    });\n\n    // T√¨m s·∫£n ph·∫©m b·ªã x√≥a\n    products1.forEach(product1 => {\n      const existingProduct = products2.find(p2 => p2.productId === product1.productId);\n      if (!existingProduct) {\n        differences.removed.push(product1);\n      }\n    });\n\n    // T√¨m s·∫£n ph·∫©m thay ƒë·ªïi s·ªë l∆∞·ª£ng\n    products1.forEach(product1 => {\n      const product2 = products2.find(p2 => p2.productId === product1.productId);\n      if (product2 && product1.quantity !== product2.quantity) {\n        differences.changed.push({\n          productId: product1.productId,\n          productName: product1.productName,\n          oldQuantity: product1.quantity,\n          newQuantity: product2.quantity,\n          change: product2.quantity - product1.quantity\n        });\n      }\n    });\n\n    return differences;\n  }\n};\n\nexport default cartService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}