{"ast":null,"code":"var _jsxFileName = \"E:\\\\Java\\\\DoAn\\\\frontend\\\\src\\\\pages\\\\product\\\\ProductMostBuy.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport ProductCard from '../common/ProductCard'; // Import cái card vừa tạo\nimport orderService from '../../services/orderService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductMostBuy = () => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    const fetchAndCalculate = async () => {\n      setLoading(true);\n      try {\n        const response = await orderService.getAllOrders();\n        const orders = response.content || response || [];\n        const stats = {};\n        orders.forEach(order => {\n          var _order$orderItems;\n          (_order$orderItems = order.orderItems) === null || _order$orderItems === void 0 ? void 0 : _order$orderItems.forEach(item => {\n            const p = item.product;\n            if (!p) return;\n            if (stats[p.productId]) {\n              stats[p.productId].totalBought += item.quantity;\n            } else {\n              stats[p.productId] = {\n                ...p,\n                totalBought: item.quantity\n              };\n            }\n          });\n        });\n        const sorted = Object.values(stats).sort((a, b) => b.totalBought - a.totalBought).slice(0, 8);\n        setProducts(sorted);\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchAndCalculate();\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center p-5 fw-bold text-orange\",\n    children: \"\\u0110ang t\\xECm h\\xE0ng Hot...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"container mt-5 py-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"fw-bold\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-warning\",\n          children: \"\\u2605\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 33\n        }, this), \" B\\xC1N CH\\u1EA0Y NH\\u1EA4T\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: products.map((p, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-xl-3 col-lg-4 col-md-6 col-6 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(ProductCard, {\n          product: p,\n          badgeText: `Top ${index + 1} - Đã bán ${p.totalBought}`,\n          badgeColor: index === 0 ? \"bg-danger\" : \"bg-warning text-dark\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this)\n      }, p.productId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductMostBuy, \"5kM5tJOLTu4uNHd5g5ws5fZ0PLE=\");\n_c = ProductMostBuy;\nexport default ProductMostBuy;\nvar _c;\n$RefreshReg$(_c, \"ProductMostBuy\");","map":{"version":3,"names":["React","useState","useEffect","ProductCard","orderService","jsxDEV","_jsxDEV","ProductMostBuy","_s","products","setProducts","loading","setLoading","fetchAndCalculate","response","getAllOrders","orders","content","stats","forEach","order","_order$orderItems","orderItems","item","p","product","productId","totalBought","quantity","sorted","Object","values","sort","a","b","slice","err","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","index","badgeText","badgeColor","_c","$RefreshReg$"],"sources":["E:/Java/DoAn/frontend/src/pages/product/ProductMostBuy.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ProductCard from '../common/ProductCard'; // Import cái card vừa tạo\nimport orderService from '../../services/orderService';\n\nconst ProductMostBuy = () => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const fetchAndCalculate = async () => {\n      setLoading(true);\n      try {\n        const response = await orderService.getAllOrders();\n        const orders = response.content || response || [];\n        \n        const stats = {};\n        orders.forEach(order => {\n          order.orderItems?.forEach(item => {\n            const p = item.product;\n            if (!p) return;\n            if (stats[p.productId]) {\n              stats[p.productId].totalBought += item.quantity;\n            } else {\n              stats[p.productId] = { ...p, totalBought: item.quantity };\n            }\n          });\n        });\n\n        const sorted = Object.values(stats)\n          .sort((a, b) => b.totalBought - a.totalBought)\n          .slice(0, 8);\n\n        setProducts(sorted);\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchAndCalculate();\n  }, []);\n\n  if (loading) return <div className=\"text-center p-5 fw-bold text-orange\">Đang tìm hàng Hot...</div>;\n\n  return (\n    <section className=\"container mt-5 py-4\">\n      <header className=\"mb-4\">\n        <h3 className=\"fw-bold\"><span className=\"text-warning\">★</span> BÁN CHẠY NHẤT</h3>\n      </header>\n\n      <div className=\"row\">\n        {products.map((p, index) => (\n          <div key={p.productId} className=\"col-xl-3 col-lg-4 col-md-6 col-6 mb-4\">\n            {/* Sử dụng lại ProductCard với props tùy biến */}\n            <ProductCard \n              product={p} \n              badgeText={`Top ${index + 1} - Đã bán ${p.totalBought}`}\n              badgeColor={index === 0 ? \"bg-danger\" : \"bg-warning text-dark\"}\n            />\n          </div>\n        ))}\n      </div>\n    </section>\n  );\n};\n\nexport default ProductMostBuy;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}