{"ast":null,"code":"// services/orderService.js\nimport api from './api';\nconst orderService = {\n  // ========== USER ORDER MANAGEMENT ==========\n\n  // Lấy tất cả đơn hàng của user\n  getUserOrders: async email => {\n    try {\n      const response = await api.get(`/public/users/${email}/orders`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi lấy danh sách đơn hàng:', error);\n      throw error;\n    }\n  },\n  // Lấy chi tiết đơn hàng theo ID\n  getOrderDetail: async (email, orderId) => {\n    try {\n      const response = await api.get(`/public/users/${email}/orders/${orderId}`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi lấy chi tiết đơn hàng:', error);\n      throw error;\n    }\n  },\n  // Hủy đơn hàng\n  cancelOrder: async (email, orderId, reason = '') => {\n    try {\n      const response = await api.put(`/public/users/${email}/orders/${orderId}/cancel`, null, {\n        params: {\n          reason\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi hủy đơn hàng:', error);\n      throw error;\n    }\n  },\n  // ========== ORDER STATUS ==========\n\n  // Cập nhật trạng thái đơn hàng\n  updateOrderStatus: async (email, orderId, status) => {\n    try {\n      const response = await api.put(`/public/users/${email}/orders/${orderId}/status`, null, {\n        params: {\n          status\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi cập nhật trạng thái:', error);\n      throw error;\n    }\n  },\n  // ========== UTILITIES ==========\n\n  // Format trạng thái đơn hàng\n  formatOrderStatus: status => {\n    const statusMap = {\n      'PENDING': {\n        text: 'Chờ xác nhận',\n        class: 'warning'\n      },\n      'CONFIRMED': {\n        text: 'Đã xác nhận',\n        class: 'info'\n      },\n      'PROCESSING': {\n        text: 'Đang xử lý',\n        class: 'primary'\n      },\n      'SHIPPED': {\n        text: 'Đang giao hàng',\n        class: 'secondary'\n      },\n      'DELIVERED': {\n        text: 'Đã giao hàng',\n        class: 'success'\n      },\n      'CANCELLED': {\n        text: 'Đã hủy',\n        class: 'danger'\n      },\n      'REFUNDED': {\n        text: 'Đã hoàn tiền',\n        class: 'dark'\n      }\n    };\n    return statusMap[status] || {\n      text: status,\n      class: 'secondary'\n    };\n  },\n  // Format phương thức thanh toán\n  formatPaymentMethod: method => {\n    const methodMap = {\n      'COD': 'Thanh toán khi nhận hàng',\n      'BANKING': 'Chuyển khoản ngân hàng',\n      'MOMO': 'Ví MoMo',\n      'ZALOPAY': 'Ví ZaloPay',\n      'CREDIT_CARD': 'Thẻ tín dụng'\n    };\n    return methodMap[method] || method;\n  },\n  // Tính tổng tiền đơn hàng\n  calculateOrderTotal: order => {\n    if (!order || !order.products) return 0;\n    return order.products.reduce((total, item) => {\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const quantity = item.quantity || 1;\n      return total + price * quantity;\n    }, 0);\n  },\n  // Format ngày tháng\n  formatDate: dateString => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    return date.toLocaleDateString('vi-VN', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  },\n  // Kiểm tra có thể hủy đơn hàng không\n  canCancelOrder: order => {\n    const cancellableStatuses = ['PENDING', 'CONFIRMED'];\n    return cancellableStatuses.includes(order.status);\n  }\n};\nexport default orderService;","map":{"version":3,"names":["api","orderService","getUserOrders","email","response","get","data","error","console","getOrderDetail","orderId","cancelOrder","reason","put","params","updateOrderStatus","status","formatOrderStatus","statusMap","text","class","formatPaymentMethod","method","methodMap","calculateOrderTotal","order","products","reduce","total","item","price","productPrice","specialPrice","quantity","formatDate","dateString","date","Date","toLocaleDateString","day","month","year","hour","minute","canCancelOrder","cancellableStatuses","includes"],"sources":["D:/JVA/frontend/src/services/orderService.js"],"sourcesContent":["// services/orderService.js\nimport api from './api';\n\nconst orderService = {\n  // ========== USER ORDER MANAGEMENT ==========\n\n  // Lấy tất cả đơn hàng của user\n  getUserOrders: async (email) => {\n    try {\n      const response = await api.get(`/public/users/${email}/orders`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi lấy danh sách đơn hàng:', error);\n      throw error;\n    }\n  },\n\n  // Lấy chi tiết đơn hàng theo ID\n  getOrderDetail: async (email, orderId) => {\n    try {\n      const response = await api.get(`/public/users/${email}/orders/${orderId}`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi lấy chi tiết đơn hàng:', error);\n      throw error;\n    }\n  },\n\n  // Hủy đơn hàng\n  cancelOrder: async (email, orderId, reason = '') => {\n    try {\n      const response = await api.put(`/public/users/${email}/orders/${orderId}/cancel`, null, {\n        params: { reason }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi hủy đơn hàng:', error);\n      throw error;\n    }\n  },\n\n  // ========== ORDER STATUS ==========\n\n  // Cập nhật trạng thái đơn hàng\n  updateOrderStatus: async (email, orderId, status) => {\n    try {\n      const response = await api.put(`/public/users/${email}/orders/${orderId}/status`, null, {\n        params: { status }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi cập nhật trạng thái:', error);\n      throw error;\n    }\n  },\n\n  // ========== UTILITIES ==========\n\n  // Format trạng thái đơn hàng\n  formatOrderStatus: (status) => {\n    const statusMap = {\n      'PENDING': { text: 'Chờ xác nhận', class: 'warning' },\n      'CONFIRMED': { text: 'Đã xác nhận', class: 'info' },\n      'PROCESSING': { text: 'Đang xử lý', class: 'primary' },\n      'SHIPPED': { text: 'Đang giao hàng', class: 'secondary' },\n      'DELIVERED': { text: 'Đã giao hàng', class: 'success' },\n      'CANCELLED': { text: 'Đã hủy', class: 'danger' },\n      'REFUNDED': { text: 'Đã hoàn tiền', class: 'dark' }\n    };\n    return statusMap[status] || { text: status, class: 'secondary' };\n  },\n\n  // Format phương thức thanh toán\n  formatPaymentMethod: (method) => {\n    const methodMap = {\n      'COD': 'Thanh toán khi nhận hàng',\n      'BANKING': 'Chuyển khoản ngân hàng',\n      'MOMO': 'Ví MoMo',\n      'ZALOPAY': 'Ví ZaloPay',\n      'CREDIT_CARD': 'Thẻ tín dụng'\n    };\n    return methodMap[method] || method;\n  },\n\n  // Tính tổng tiền đơn hàng\n  calculateOrderTotal: (order) => {\n    if (!order || !order.products) return 0;\n    return order.products.reduce((total, item) => {\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const quantity = item.quantity || 1;\n      return total + (price * quantity);\n    }, 0);\n  },\n\n  // Format ngày tháng\n  formatDate: (dateString) => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    return date.toLocaleDateString('vi-VN', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  },\n\n  // Kiểm tra có thể hủy đơn hàng không\n  canCancelOrder: (order) => {\n    const cancellableStatuses = ['PENDING', 'CONFIRMED'];\n    return cancellableStatuses.includes(order.status);\n  }\n};\n\nexport default orderService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}