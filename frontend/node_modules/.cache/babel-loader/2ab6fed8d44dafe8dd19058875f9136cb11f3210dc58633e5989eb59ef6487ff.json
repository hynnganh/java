{"ast":null,"code":"var _jsxFileName = \"E:\\\\Java\\\\DoAn\\\\frontend\\\\src\\\\pages\\\\admin\\\\AdminLogin.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport authService from \"../../services/authService\";\nimport Swal from \"sweetalert2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminLogin = () => {\n  _s();\n  const navigate = useNavigate();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      var _payload$roles;\n      const res = await authService.login({\n        email,\n        password\n      });\n      const token = res.data.token || res.data.jwt || res.data[\"jwt-token\"];\n      if (!token) throw new Error(\"Kh√¥ng c√≥ token\");\n\n      // ‚úÖ DECODE JWT\n      const payload = JSON.parse(atob(token.split(\".\")[1]));\n      let role = (_payload$roles = payload.roles) === null || _payload$roles === void 0 ? void 0 : _payload$roles[0]; // ROLE_ADMIN\n\n      if (!role) throw new Error(\"Kh√¥ng c√≥ role\");\n      role = role.replace(\"ROLE_\", \"\"); // ADMIN\n\n      if (role !== \"ADMIN\") {\n        Swal.fire(\"‚õî Kh√¥ng c√≥ quy·ªÅn\", \"B·∫°n kh√¥ng ph·∫£i ADMIN\", \"error\");\n        return;\n      }\n\n      // ‚úÖ L∆ØU\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"role\", role);\n      Swal.fire({\n        icon: \"success\",\n        title: \"Admin ƒëƒÉng nh·∫≠p th√†nh c√¥ng üëë\",\n        timer: 1200,\n        showConfirmButton: false\n      });\n      navigate(\"/admin\");\n    } catch (err) {\n      Swal.fire(\"ƒêƒÉng nh·∫≠p th·∫•t b·∫°i\", err.message || \"Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      width: 320,\n      margin: \"100px auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"ADMIN LOGIN\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Email\",\n      value: email,\n      onChange: e => setEmail(e.target.value),\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      placeholder: \"Password\",\n      value: password,\n      onChange: e => setPassword(e.target.value),\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      disabled: loading,\n      children: loading ? \"ƒêang ƒëƒÉng nh·∫≠p...\" : \"LOGIN\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminLogin, \"CfR40Rcuqk85Bvc/vWmX4pIF2bY=\", false, function () {\n  return [useNavigate];\n});\n_c = AdminLogin;\nexport default AdminLogin;\nvar _c;\n$RefreshReg$(_c, \"AdminLogin\");","map":{"version":3,"names":["React","useState","useNavigate","authService","Swal","jsxDEV","_jsxDEV","AdminLogin","_s","navigate","email","setEmail","password","setPassword","loading","setLoading","handleSubmit","e","preventDefault","_payload$roles","res","login","token","data","jwt","Error","payload","JSON","parse","atob","split","role","roles","replace","fire","localStorage","setItem","icon","title","timer","showConfirmButton","err","message","onSubmit","style","width","margin","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","target","required","type","disabled","_c","$RefreshReg$"],"sources":["E:/Java/DoAn/frontend/src/pages/admin/AdminLogin.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport authService from \"../../services/authService\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst AdminLogin = () => {\r\n  const navigate = useNavigate();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await authService.login({ email, password });\r\n      const token =\r\n        res.data.token ||\r\n        res.data.jwt ||\r\n        res.data[\"jwt-token\"];\r\n\r\n      if (!token) throw new Error(\"Kh√¥ng c√≥ token\");\r\n\r\n      // ‚úÖ DECODE JWT\r\n      const payload = JSON.parse(atob(token.split(\".\")[1]));\r\n      let role = payload.roles?.[0]; // ROLE_ADMIN\r\n\r\n      if (!role) throw new Error(\"Kh√¥ng c√≥ role\");\r\n\r\n      role = role.replace(\"ROLE_\", \"\"); // ADMIN\r\n\r\n      if (role !== \"ADMIN\") {\r\n        Swal.fire(\"‚õî Kh√¥ng c√≥ quy·ªÅn\", \"B·∫°n kh√¥ng ph·∫£i ADMIN\", \"error\");\r\n        return;\r\n      }\r\n\r\n      // ‚úÖ L∆ØU\r\n      localStorage.setItem(\"token\", token);\r\n      localStorage.setItem(\"role\", role);\r\n\r\n      Swal.fire({\r\n        icon: \"success\",\r\n        title: \"Admin ƒëƒÉng nh·∫≠p th√†nh c√¥ng üëë\",\r\n        timer: 1200,\r\n        showConfirmButton: false,\r\n      });\r\n\r\n      navigate(\"/admin\");\r\n    } catch (err) {\r\n      Swal.fire(\r\n        \"ƒêƒÉng nh·∫≠p th·∫•t b·∫°i\",\r\n        err.message || \"Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u\",\r\n        \"error\"\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} style={{ width: 320, margin: \"100px auto\" }}>\r\n      <h3>ADMIN LOGIN</h3>\r\n\r\n      <input\r\n        placeholder=\"Email\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        required\r\n      />\r\n\r\n      <input\r\n        type=\"password\"\r\n        placeholder=\"Password\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        required\r\n      />\r\n\r\n      <button disabled={loading}>\r\n        {loading ? \"ƒêang ƒëƒÉng nh·∫≠p...\" : \"LOGIN\"}\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default AdminLogin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}