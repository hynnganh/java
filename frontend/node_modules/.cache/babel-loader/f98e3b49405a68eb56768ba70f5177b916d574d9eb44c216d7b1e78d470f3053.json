{"ast":null,"code":"var _jsxFileName = \"E:\\\\Java\\\\DoAn\\\\frontend\\\\src\\\\pages\\\\product\\\\ProductReview.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport ReactStars from 'react-stars';\nimport api from '../../services/api';\nimport Swal from 'sweetalert2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductReview = ({\n  productId,\n  currentUser\n}) => {\n  _s();\n  const [reviews, setReviews] = useState([]);\n  const [canReview, setCanReview] = useState(false);\n  const [comment, setComment] = useState(\"\");\n  const [rating, setRating] = useState(5);\n  const [averageRating, setAverageRating] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const REVIEW_PATH = \"/reviews\";\n  useEffect(() => {\n    if (productId) {\n      fetchReviews();\n      fetchAverageRating();\n    }\n  }, [productId]);\n\n  // Tách biệt useEffect để check quyền khi currentUser đã load xong\n  useEffect(() => {\n    if (productId && currentUser !== null && currentUser !== void 0 && currentUser.userId) {\n      checkReviewPermission();\n    } else {\n      setCanReview(false);\n    }\n  }, [productId, currentUser, reviews]); // Check lại khi danh sách reviews thay đổi\n\n  // 1. Lấy danh sách đánh giá\n  const fetchReviews = async () => {\n    try {\n      const res = await api.get(`${REVIEW_PATH}/product/${productId}`);\n      setReviews(res.data);\n    } catch (err) {\n      console.error(\"Lỗi fetch reviews:\", err);\n    }\n  };\n\n  // 2. Lấy điểm trung bình\n  const fetchAverageRating = async () => {\n    try {\n      const res = await api.get(`${REVIEW_PATH}/product/${productId}/average`);\n      setAverageRating(res.data || 0);\n    } catch (err) {\n      console.error(\"Lỗi fetch average rating:\", err);\n    }\n  };\n\n  // 3. Kiểm tra quyền (Khớp với canUserReview trong Service của nàng)\n  const checkReviewPermission = async () => {\n    try {\n      // Đầu tiên: Check xem user này đã nằm trong danh sách reviews chưa (Chặn đánh giá 2 lần)\n      const alreadyReviewed = reviews.some(r => r.userId === currentUser.userId);\n      if (alreadyReviewed) {\n        setCanReview(false);\n        return;\n      }\n\n      // Thứ hai: Gọi API Backend check xem đã mua hàng DELIVERED chưa\n      const res = await api.get(`${REVIEW_PATH}/public/can-review`, {\n        params: {\n          userId: currentUser.userId,\n          productId: productId\n        }\n      });\n      setCanReview(res.data);\n    } catch (err) {\n      setCanReview(false);\n    }\n  };\n\n  // 4. Gửi đánh giá\n  const handleSubmit = async () => {\n    if (!comment.trim()) {\n      Swal.fire('Thông báo', 'Nàng viết vài dòng cảm nhận đã nhé!', 'warning');\n      return;\n    }\n    setLoading(true);\n    const reviewDTO = {\n      comment: comment,\n      rating: rating,\n      productId: productId,\n      userId: currentUser.userId\n    };\n    try {\n      const res = await api.post(`${REVIEW_PATH}/add`, reviewDTO);\n\n      // Update UI ngay lập tức\n      setReviews([res.data, ...reviews]);\n      setComment(\"\");\n      setCanReview(false); // Đánh giá xong là khóa luôn form\n      fetchAverageRating();\n      Swal.fire({\n        icon: 'success',\n        title: 'Xong luôn!',\n        text: 'Cảm ơn nàng đã ủng hộ shop nhé! ❤️',\n        timer: 2000,\n        showConfirmButton: false\n      });\n    } catch (err) {\n      var _err$response, _err$response$data;\n      // Bắt lỗi 400 từ APIException của nàng\n      const errorMsg = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Lỗi rồi, thử lại sau nàng nha!\";\n      Swal.fire('Hic!', errorMsg, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-review-section mt-5 border-top pt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row g-4 mb-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-4 text-center border-end\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"display-4 fw-bold text-warning mb-0\",\n            children: Number(averageRating).toFixed(1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-center my-2\",\n            children: /*#__PURE__*/_jsxDEV(ReactStars, {\n              count: 5,\n              size: 30,\n              value: parseFloat(averageRating),\n              edit: false,\n              color2: '#ffc107'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted small\",\n            children: [reviews.length, \" kh\\xE1ch h\\xE0ng \\u0111\\xE3 tin d\\xF9ng\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-8 ps-lg-5\",\n        children: canReview ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"review-form-box p-4 rounded-4 shadow-sm bg-white border border-warning\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"fw-bold mb-3 text-uppercase\",\n            children: \"G\\u1EEDi \\u0111\\xE1nh gi\\xE1 c\\u1EE7a n\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3 d-flex align-items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"small text-muted\",\n              children: \"N\\xE0ng th\\u1EA5y s\\u1EA3n ph\\u1EA9m sao?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ReactStars, {\n              count: 5,\n              size: 24,\n              value: rating,\n              onChange: r => setRating(r),\n              color2: '#ffc107'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"form-control border-0 bg-light rounded-3 p-3 shadow-none\",\n            rows: \"3\",\n            value: comment,\n            onChange: e => setComment(e.target.value),\n            placeholder: \"N\\xE0ng chia s\\u1EBB tr\\u1EA3i nghi\\u1EC7m \\u1EDF \\u0111\\xE2y nh\\xE9...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-end mt-3\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-warning text-white fw-bold px-4 py-2 rounded-pill shadow-sm\",\n              onClick: handleSubmit,\n              disabled: loading,\n              children: loading ? 'Đang gửi...' : 'Gửi ngay'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-100 d-flex flex-column align-items-center justify-content-center p-4 rounded-4 bg-light border border-dashed\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: `bi ${!currentUser ? 'bi-person-lock' : reviews.some(r => r.userId === currentUser.userId) ? 'bi-check-all text-success' : 'bi-cart-x'} fs-1 text-muted mb-2`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted small text-center mb-0 px-3\",\n            children: !currentUser ? \"Nàng cần đăng nhập để viết đánh giá.\" : reviews.some(r => r.userId === currentUser.userId) ? \"Nàng đã đánh giá sản phẩm này rồi. Mãi yêu! ❤️\" : \"Đánh giá chỉ dành cho nàng đã mua và nhận hàng thành công sản phẩm này thôi nè.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n        className: \"fw-bold mb-4\",\n        children: [\"C\\xC1C PH\\u1EA2N H\\u1ED2I KH\\xC1C (\", reviews.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), reviews.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"review-scroll\",\n        style: {\n          maxHeight: '500px',\n          overflowY: 'auto'\n        },\n        children: reviews.map(r => {\n          var _r$userName;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4 p-3 rounded-3 bg-white border-bottom shadow-sm-hover transition\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex align-items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"avatar-small\",\n                  children: (_r$userName = r.userName) === null || _r$userName === void 0 ? void 0 : _r$userName.charAt(0).toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"fw-bold d-block small\",\n                    children: r.userName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ReactStars, {\n                    count: 5,\n                    size: 12,\n                    value: r.rating,\n                    edit: false,\n                    color2: '#ffc107'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-muted x-small italic\",\n                children: new Date(r.createdAt).toLocaleDateString('vi-VN')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 mb-0 small text-secondary ps-5\",\n              children: [\"\\\"\", r.comment, \"\\\"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this)]\n          }, r.reviewId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-4 text-muted small italic\",\n        children: \"S\\u1EA3n ph\\u1EA9m ch\\u01B0a c\\xF3 \\u0111\\xE1nh gi\\xE1 n\\xE0o n\\xE0ng \\u01A1i...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        .avatar-small { width: 35px; height: 35px; background: #fff3cd; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #856404; font-size: 14px; }\n        .x-small { font-size: 11px; }\n        .border-dashed { border: 2px dashed #ddd !important; }\n        .shadow-sm-hover:hover { box-shadow: 0 5px 15px rgba(0,0,0,0.05); transform: translateY(-2px); }\n        .transition { transition: all 0.3s ease; }\n        .review-scroll::-webkit-scrollbar { width: 5px; }\n        .review-scroll::-webkit-scrollbar-thumb { background: #ffc107; border-radius: 10px; }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductReview, \"fWvg/hoKWmpNJTsUa6HecEF7j4E=\");\n_c = ProductReview;\nexport default ProductReview;\nvar _c;\n$RefreshReg$(_c, \"ProductReview\");","map":{"version":3,"names":["React","useState","useEffect","ReactStars","api","Swal","jsxDEV","_jsxDEV","ProductReview","productId","currentUser","_s","reviews","setReviews","canReview","setCanReview","comment","setComment","rating","setRating","averageRating","setAverageRating","loading","setLoading","REVIEW_PATH","fetchReviews","fetchAverageRating","userId","checkReviewPermission","res","get","data","err","console","error","alreadyReviewed","some","r","params","handleSubmit","trim","fire","reviewDTO","post","icon","title","text","timer","showConfirmButton","_err$response","_err$response$data","errorMsg","response","message","className","children","Number","toFixed","fileName","_jsxFileName","lineNumber","columnNumber","count","size","value","parseFloat","edit","color2","length","onChange","rows","e","target","placeholder","onClick","disabled","style","maxHeight","overflowY","map","_r$userName","userName","charAt","toUpperCase","Date","createdAt","toLocaleDateString","reviewId","_c","$RefreshReg$"],"sources":["E:/Java/DoAn/frontend/src/pages/product/ProductReview.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport ReactStars from 'react-stars';\r\nimport api from '../../services/api'; \r\nimport Swal from 'sweetalert2';\r\n\r\nconst ProductReview = ({ productId, currentUser }) => {\r\n  const [reviews, setReviews] = useState([]);\r\n  const [canReview, setCanReview] = useState(false);\r\n  const [comment, setComment] = useState(\"\");\r\n  const [rating, setRating] = useState(5);\r\n  const [averageRating, setAverageRating] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const REVIEW_PATH = \"/reviews\";\r\n\r\n  useEffect(() => {\r\n    if (productId) {\r\n      fetchReviews();\r\n      fetchAverageRating();\r\n    }\r\n  }, [productId]);\r\n\r\n  // Tách biệt useEffect để check quyền khi currentUser đã load xong\r\n  useEffect(() => {\r\n    if (productId && currentUser?.userId) {\r\n      checkReviewPermission();\r\n    } else {\r\n      setCanReview(false);\r\n    }\r\n  }, [productId, currentUser, reviews]); // Check lại khi danh sách reviews thay đổi\r\n\r\n  // 1. Lấy danh sách đánh giá\r\n  const fetchReviews = async () => {\r\n    try {\r\n      const res = await api.get(`${REVIEW_PATH}/product/${productId}`);\r\n      setReviews(res.data);\r\n    } catch (err) {\r\n      console.error(\"Lỗi fetch reviews:\", err);\r\n    }\r\n  };\r\n\r\n  // 2. Lấy điểm trung bình\r\n  const fetchAverageRating = async () => {\r\n    try {\r\n      const res = await api.get(`${REVIEW_PATH}/product/${productId}/average`);\r\n      setAverageRating(res.data || 0);\r\n    } catch (err) {\r\n      console.error(\"Lỗi fetch average rating:\", err);\r\n    }\r\n  };\r\n\r\n  // 3. Kiểm tra quyền (Khớp với canUserReview trong Service của nàng)\r\n  const checkReviewPermission = async () => {\r\n    try {\r\n      // Đầu tiên: Check xem user này đã nằm trong danh sách reviews chưa (Chặn đánh giá 2 lần)\r\n      const alreadyReviewed = reviews.some(r => r.userId === currentUser.userId);\r\n      \r\n      if (alreadyReviewed) {\r\n        setCanReview(false);\r\n        return;\r\n      }\r\n\r\n      // Thứ hai: Gọi API Backend check xem đã mua hàng DELIVERED chưa\r\n      const res = await api.get(`${REVIEW_PATH}/public/can-review`, {\r\n        params: { userId: currentUser.userId, productId: productId }\r\n      });\r\n      setCanReview(res.data);\r\n    } catch (err) {\r\n      setCanReview(false);\r\n    }\r\n  };\r\n\r\n  // 4. Gửi đánh giá\r\n  const handleSubmit = async () => {\r\n    if (!comment.trim()) {\r\n      Swal.fire('Thông báo', 'Nàng viết vài dòng cảm nhận đã nhé!', 'warning');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    const reviewDTO = {\r\n      comment: comment,\r\n      rating: rating,\r\n      productId: productId,\r\n      userId: currentUser.userId\r\n    };\r\n\r\n    try {\r\n      const res = await api.post(`${REVIEW_PATH}/add`, reviewDTO);\r\n      \r\n      // Update UI ngay lập tức\r\n      setReviews([res.data, ...reviews]);\r\n      setComment(\"\");\r\n      setCanReview(false); // Đánh giá xong là khóa luôn form\r\n      fetchAverageRating();\r\n\r\n      Swal.fire({\r\n        icon: 'success',\r\n        title: 'Xong luôn!',\r\n        text: 'Cảm ơn nàng đã ủng hộ shop nhé! ❤️',\r\n        timer: 2000,\r\n        showConfirmButton: false\r\n      });\r\n    } catch (err) {\r\n      // Bắt lỗi 400 từ APIException của nàng\r\n      const errorMsg = err.response?.data?.message || \"Lỗi rồi, thử lại sau nàng nha!\";\r\n      Swal.fire('Hic!', errorMsg, 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"product-review-section mt-5 border-top pt-5\">\r\n      <div className=\"row g-4 mb-5\">\r\n        {/* BÊN TRÁI: ĐIỂM SỐ */}\r\n        <div className=\"col-lg-4 text-center border-end\">\r\n          <div className=\"p-3\">\r\n            <h1 className=\"display-4 fw-bold text-warning mb-0\">\r\n              {Number(averageRating).toFixed(1)}\r\n            </h1>\r\n            <div className=\"d-flex justify-content-center my-2\">\r\n              <ReactStars count={5} size={30} value={parseFloat(averageRating)} edit={false} color2={'#ffc107'} />\r\n            </div>\r\n            <p className=\"text-muted small\">{reviews.length} khách hàng đã tin dùng</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* BÊN PHẢI: FORM HOẶC THÔNG BÁO */}\r\n        <div className=\"col-lg-8 ps-lg-5\">\r\n          {canReview ? (\r\n            <div className=\"review-form-box p-4 rounded-4 shadow-sm bg-white border border-warning\">\r\n              <h6 className=\"fw-bold mb-3 text-uppercase\">Gửi đánh giá của nàng</h6>\r\n              <div className=\"mb-3 d-flex align-items-center gap-2\">\r\n                <span className=\"small text-muted\">Nàng thấy sản phẩm sao?</span>\r\n                <ReactStars count={5} size={24} value={rating} onChange={(r) => setRating(r)} color2={'#ffc107'} />\r\n              </div>\r\n              <textarea \r\n                className=\"form-control border-0 bg-light rounded-3 p-3 shadow-none\" \r\n                rows=\"3\" \r\n                value={comment} \r\n                onChange={(e) => setComment(e.target.value)}\r\n                placeholder=\"Nàng chia sẻ trải nghiệm ở đây nhé...\"\r\n              ></textarea>\r\n              <div className=\"text-end mt-3\">\r\n                <button className=\"btn btn-warning text-white fw-bold px-4 py-2 rounded-pill shadow-sm\" \r\n                        onClick={handleSubmit} disabled={loading}>\r\n                  {loading ? 'Đang gửi...' : 'Gửi ngay'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"h-100 d-flex flex-column align-items-center justify-content-center p-4 rounded-4 bg-light border border-dashed\">\r\n              <i className={`bi ${!currentUser ? 'bi-person-lock' : reviews.some(r => r.userId === currentUser.userId) ? 'bi-check-all text-success' : 'bi-cart-x'} fs-1 text-muted mb-2`}></i>\r\n              <p className=\"text-muted small text-center mb-0 px-3\">\r\n                {!currentUser \r\n                  ? \"Nàng cần đăng nhập để viết đánh giá.\" \r\n                  : reviews.some(r => r.userId === currentUser.userId)\r\n                    ? \"Nàng đã đánh giá sản phẩm này rồi. Mãi yêu! ❤️\"\r\n                    : \"Đánh giá chỉ dành cho nàng đã mua và nhận hàng thành công sản phẩm này thôi nè.\"}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* DANH SÁCH REVIEW */}\r\n      <div className=\"mt-5\">\r\n        <h6 className=\"fw-bold mb-4\">CÁC PHẢN HỒI KHÁC ({reviews.length})</h6>\r\n        {reviews.length > 0 ? (\r\n          <div className=\"review-scroll\" style={{maxHeight: '500px', overflowY: 'auto'}}>\r\n            {reviews.map((r) => (\r\n              <div key={r.reviewId} className=\"mb-4 p-3 rounded-3 bg-white border-bottom shadow-sm-hover transition\">\r\n                <div className=\"d-flex justify-content-between\">\r\n                  <div className=\"d-flex align-items-center gap-2\">\r\n                    <div className=\"avatar-small\">{r.userName?.charAt(0).toUpperCase()}</div>\r\n                    <div>\r\n                      <span className=\"fw-bold d-block small\">{r.userName}</span>\r\n                      <ReactStars count={5} size={12} value={r.rating} edit={false} color2={'#ffc107'} />\r\n                    </div>\r\n                  </div>\r\n                  <span className=\"text-muted x-small italic\">{new Date(r.createdAt).toLocaleDateString('vi-VN')}</span>\r\n                </div>\r\n                <p className=\"mt-2 mb-0 small text-secondary ps-5\">\"{r.comment}\"</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-center py-4 text-muted small italic\">Sản phẩm chưa có đánh giá nào nàng ơi...</div>\r\n        )}\r\n      </div>\r\n\r\n      <style>{`\r\n        .avatar-small { width: 35px; height: 35px; background: #fff3cd; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #856404; font-size: 14px; }\r\n        .x-small { font-size: 11px; }\r\n        .border-dashed { border: 2px dashed #ddd !important; }\r\n        .shadow-sm-hover:hover { box-shadow: 0 5px 15px rgba(0,0,0,0.05); transform: translateY(-2px); }\r\n        .transition { transition: all 0.3s ease; }\r\n        .review-scroll::-webkit-scrollbar { width: 5px; }\r\n        .review-scroll::-webkit-scrollbar-thumb { background: #ffc107; border-radius: 10px; }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductReview;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,UAAU,MAAM,aAAa;AACpC,OAAOC,GAAG,MAAM,oBAAoB;AACpC,OAAOC,IAAI,MAAM,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/B,MAAMC,aAAa,GAAGA,CAAC;EAAEC,SAAS;EAAEC;AAAY,CAAC,KAAK;EAAAC,EAAA;EACpD,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACa,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACiB,MAAM,EAAEC,SAAS,CAAC,GAAGlB,QAAQ,CAAC,CAAC,CAAC;EACvC,MAAM,CAACmB,aAAa,EAAEC,gBAAgB,CAAC,GAAGpB,QAAQ,CAAC,CAAC,CAAC;EACrD,MAAM,CAACqB,OAAO,EAAEC,UAAU,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAMuB,WAAW,GAAG,UAAU;EAE9BtB,SAAS,CAAC,MAAM;IACd,IAAIO,SAAS,EAAE;MACbgB,YAAY,CAAC,CAAC;MACdC,kBAAkB,CAAC,CAAC;IACtB;EACF,CAAC,EAAE,CAACjB,SAAS,CAAC,CAAC;;EAEf;EACAP,SAAS,CAAC,MAAM;IACd,IAAIO,SAAS,IAAIC,WAAW,aAAXA,WAAW,eAAXA,WAAW,CAAEiB,MAAM,EAAE;MACpCC,qBAAqB,CAAC,CAAC;IACzB,CAAC,MAAM;MACLb,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC,EAAE,CAACN,SAAS,EAAEC,WAAW,EAAEE,OAAO,CAAC,CAAC,CAAC,CAAC;;EAEvC;EACA,MAAMa,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACF,MAAMI,GAAG,GAAG,MAAMzB,GAAG,CAAC0B,GAAG,CAAC,GAAGN,WAAW,YAAYf,SAAS,EAAE,CAAC;MAChEI,UAAU,CAACgB,GAAG,CAACE,IAAI,CAAC;IACtB,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,oBAAoB,EAAEF,GAAG,CAAC;IAC1C;EACF,CAAC;;EAED;EACA,MAAMN,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IACrC,IAAI;MACF,MAAMG,GAAG,GAAG,MAAMzB,GAAG,CAAC0B,GAAG,CAAC,GAAGN,WAAW,YAAYf,SAAS,UAAU,CAAC;MACxEY,gBAAgB,CAACQ,GAAG,CAACE,IAAI,IAAI,CAAC,CAAC;IACjC,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEF,GAAG,CAAC;IACjD;EACF,CAAC;;EAED;EACA,MAAMJ,qBAAqB,GAAG,MAAAA,CAAA,KAAY;IACxC,IAAI;MACF;MACA,MAAMO,eAAe,GAAGvB,OAAO,CAACwB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACV,MAAM,KAAKjB,WAAW,CAACiB,MAAM,CAAC;MAE1E,IAAIQ,eAAe,EAAE;QACnBpB,YAAY,CAAC,KAAK,CAAC;QACnB;MACF;;MAEA;MACA,MAAMc,GAAG,GAAG,MAAMzB,GAAG,CAAC0B,GAAG,CAAC,GAAGN,WAAW,oBAAoB,EAAE;QAC5Dc,MAAM,EAAE;UAAEX,MAAM,EAAEjB,WAAW,CAACiB,MAAM;UAAElB,SAAS,EAAEA;QAAU;MAC7D,CAAC,CAAC;MACFM,YAAY,CAACc,GAAG,CAACE,IAAI,CAAC;IACxB,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZjB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;;EAED;EACA,MAAMwB,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAACvB,OAAO,CAACwB,IAAI,CAAC,CAAC,EAAE;MACnBnC,IAAI,CAACoC,IAAI,CAAC,WAAW,EAAE,qCAAqC,EAAE,SAAS,CAAC;MACxE;IACF;IAEAlB,UAAU,CAAC,IAAI,CAAC;IAChB,MAAMmB,SAAS,GAAG;MAChB1B,OAAO,EAAEA,OAAO;MAChBE,MAAM,EAAEA,MAAM;MACdT,SAAS,EAAEA,SAAS;MACpBkB,MAAM,EAAEjB,WAAW,CAACiB;IACtB,CAAC;IAED,IAAI;MACF,MAAME,GAAG,GAAG,MAAMzB,GAAG,CAACuC,IAAI,CAAC,GAAGnB,WAAW,MAAM,EAAEkB,SAAS,CAAC;;MAE3D;MACA7B,UAAU,CAAC,CAACgB,GAAG,CAACE,IAAI,EAAE,GAAGnB,OAAO,CAAC,CAAC;MAClCK,UAAU,CAAC,EAAE,CAAC;MACdF,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;MACrBW,kBAAkB,CAAC,CAAC;MAEpBrB,IAAI,CAACoC,IAAI,CAAC;QACRG,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE,YAAY;QACnBC,IAAI,EAAE,oCAAoC;QAC1CC,KAAK,EAAE,IAAI;QACXC,iBAAiB,EAAE;MACrB,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOhB,GAAG,EAAE;MAAA,IAAAiB,aAAA,EAAAC,kBAAA;MACZ;MACA,MAAMC,QAAQ,GAAG,EAAAF,aAAA,GAAAjB,GAAG,CAACoB,QAAQ,cAAAH,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAclB,IAAI,cAAAmB,kBAAA,uBAAlBA,kBAAA,CAAoBG,OAAO,KAAI,gCAAgC;MAChFhD,IAAI,CAACoC,IAAI,CAAC,MAAM,EAAEU,QAAQ,EAAE,OAAO,CAAC;IACtC,CAAC,SAAS;MACR5B,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,oBACEhB,OAAA;IAAK+C,SAAS,EAAC,6CAA6C;IAAAC,QAAA,gBAC1DhD,OAAA;MAAK+C,SAAS,EAAC,cAAc;MAAAC,QAAA,gBAE3BhD,OAAA;QAAK+C,SAAS,EAAC,iCAAiC;QAAAC,QAAA,eAC9ChD,OAAA;UAAK+C,SAAS,EAAC,KAAK;UAAAC,QAAA,gBAClBhD,OAAA;YAAI+C,SAAS,EAAC,qCAAqC;YAAAC,QAAA,EAChDC,MAAM,CAACpC,aAAa,CAAC,CAACqC,OAAO,CAAC,CAAC;UAAC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/B,CAAC,eACLtD,OAAA;YAAK+C,SAAS,EAAC,oCAAoC;YAAAC,QAAA,eACjDhD,OAAA,CAACJ,UAAU;cAAC2D,KAAK,EAAE,CAAE;cAACC,IAAI,EAAE,EAAG;cAACC,KAAK,EAAEC,UAAU,CAAC7C,aAAa,CAAE;cAAC8C,IAAI,EAAE,KAAM;cAACC,MAAM,EAAE;YAAU;cAAAT,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjG,CAAC,eACNtD,OAAA;YAAG+C,SAAS,EAAC,kBAAkB;YAAAC,QAAA,GAAE3C,OAAO,CAACwD,MAAM,EAAC,0CAAuB;UAAA;YAAAV,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNtD,OAAA;QAAK+C,SAAS,EAAC,kBAAkB;QAAAC,QAAA,EAC9BzC,SAAS,gBACRP,OAAA;UAAK+C,SAAS,EAAC,wEAAwE;UAAAC,QAAA,gBACrFhD,OAAA;YAAI+C,SAAS,EAAC,6BAA6B;YAAAC,QAAA,EAAC;UAAqB;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACtEtD,OAAA;YAAK+C,SAAS,EAAC,sCAAsC;YAAAC,QAAA,gBACnDhD,OAAA;cAAM+C,SAAS,EAAC,kBAAkB;cAAAC,QAAA,EAAC;YAAuB;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACjEtD,OAAA,CAACJ,UAAU;cAAC2D,KAAK,EAAE,CAAE;cAACC,IAAI,EAAE,EAAG;cAACC,KAAK,EAAE9C,MAAO;cAACmD,QAAQ,EAAGhC,CAAC,IAAKlB,SAAS,CAACkB,CAAC,CAAE;cAAC8B,MAAM,EAAE;YAAU;cAAAT,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChG,CAAC,eACNtD,OAAA;YACE+C,SAAS,EAAC,0DAA0D;YACpEgB,IAAI,EAAC,GAAG;YACRN,KAAK,EAAEhD,OAAQ;YACfqD,QAAQ,EAAGE,CAAC,IAAKtD,UAAU,CAACsD,CAAC,CAACC,MAAM,CAACR,KAAK,CAAE;YAC5CS,WAAW,EAAC;UAAuC;YAAAf,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1C,CAAC,eACZtD,OAAA;YAAK+C,SAAS,EAAC,eAAe;YAAAC,QAAA,eAC5BhD,OAAA;cAAQ+C,SAAS,EAAC,qEAAqE;cAC/EoB,OAAO,EAAEnC,YAAa;cAACoC,QAAQ,EAAErD,OAAQ;cAAAiC,QAAA,EAC9CjC,OAAO,GAAG,aAAa,GAAG;YAAU;cAAAoC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/B;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,gBAENtD,OAAA;UAAK+C,SAAS,EAAC,gHAAgH;UAAAC,QAAA,gBAC7HhD,OAAA;YAAG+C,SAAS,EAAE,MAAM,CAAC5C,WAAW,GAAG,gBAAgB,GAAGE,OAAO,CAACwB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACV,MAAM,KAAKjB,WAAW,CAACiB,MAAM,CAAC,GAAG,2BAA2B,GAAG,WAAW;UAAwB;YAAA+B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACjLtD,OAAA;YAAG+C,SAAS,EAAC,wCAAwC;YAAAC,QAAA,EAClD,CAAC7C,WAAW,GACT,sCAAsC,GACtCE,OAAO,CAACwB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACV,MAAM,KAAKjB,WAAW,CAACiB,MAAM,CAAC,GAChD,gDAAgD,GAChD;UAAiF;YAAA+B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtF,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD;MACN;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNtD,OAAA;MAAK+C,SAAS,EAAC,MAAM;MAAAC,QAAA,gBACnBhD,OAAA;QAAI+C,SAAS,EAAC,cAAc;QAAAC,QAAA,GAAC,qCAAmB,EAAC3C,OAAO,CAACwD,MAAM,EAAC,GAAC;MAAA;QAAAV,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EACrEjD,OAAO,CAACwD,MAAM,GAAG,CAAC,gBACjB7D,OAAA;QAAK+C,SAAS,EAAC,eAAe;QAACsB,KAAK,EAAE;UAACC,SAAS,EAAE,OAAO;UAAEC,SAAS,EAAE;QAAM,CAAE;QAAAvB,QAAA,EAC3E3C,OAAO,CAACmE,GAAG,CAAE1C,CAAC;UAAA,IAAA2C,WAAA;UAAA,oBACbzE,OAAA;YAAsB+C,SAAS,EAAC,sEAAsE;YAAAC,QAAA,gBACpGhD,OAAA;cAAK+C,SAAS,EAAC,gCAAgC;cAAAC,QAAA,gBAC7ChD,OAAA;gBAAK+C,SAAS,EAAC,iCAAiC;gBAAAC,QAAA,gBAC9ChD,OAAA;kBAAK+C,SAAS,EAAC,cAAc;kBAAAC,QAAA,GAAAyB,WAAA,GAAE3C,CAAC,CAAC4C,QAAQ,cAAAD,WAAA,uBAAVA,WAAA,CAAYE,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC;gBAAC;kBAAAzB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACzEtD,OAAA;kBAAAgD,QAAA,gBACEhD,OAAA;oBAAM+C,SAAS,EAAC,uBAAuB;oBAAAC,QAAA,EAAElB,CAAC,CAAC4C;kBAAQ;oBAAAvB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAC3DtD,OAAA,CAACJ,UAAU;oBAAC2D,KAAK,EAAE,CAAE;oBAACC,IAAI,EAAE,EAAG;oBAACC,KAAK,EAAE3B,CAAC,CAACnB,MAAO;oBAACgD,IAAI,EAAE,KAAM;oBAACC,MAAM,EAAE;kBAAU;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChF,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eACNtD,OAAA;gBAAM+C,SAAS,EAAC,2BAA2B;gBAAAC,QAAA,EAAE,IAAI6B,IAAI,CAAC/C,CAAC,CAACgD,SAAS,CAAC,CAACC,kBAAkB,CAAC,OAAO;cAAC;gBAAA5B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnG,CAAC,eACNtD,OAAA;cAAG+C,SAAS,EAAC,qCAAqC;cAAAC,QAAA,GAAC,IAAC,EAAClB,CAAC,CAACrB,OAAO,EAAC,IAAC;YAAA;cAAA0C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA,GAX5DxB,CAAC,CAACkD,QAAQ;YAAA7B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAYf,CAAC;QAAA,CACP;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,gBAENtD,OAAA;QAAK+C,SAAS,EAAC,0CAA0C;QAAAC,QAAA,EAAC;MAAwC;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CACxG;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAENtD,OAAA;MAAAgD,QAAA,EAAQ;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAAO;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACP,CAAC;AAEV,CAAC;AAAClD,EAAA,CAtMIH,aAAa;AAAAgF,EAAA,GAAbhF,aAAa;AAwMnB,eAAeA,aAAa;AAAC,IAAAgF,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}