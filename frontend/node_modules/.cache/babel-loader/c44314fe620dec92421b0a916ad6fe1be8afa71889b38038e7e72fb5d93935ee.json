{"ast":null,"code":"// services/cartService.js\nimport api from './api';\nconst cartService = {\n  // Lấy giỏ hàng active của user\n  getActiveCart: async email => {\n    try {\n      const response = await api.get(`/api/public/users/${email}/carts/active`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi lấy giỏ hàng:', error);\n      throw error;\n    }\n  },\n  // Thêm sản phẩm vào giỏ hàng\n  addToCart: async (cartId, productId, quantity) => {\n    try {\n      let url;\n      if (cartId) {\n        // Nếu có cartId, thêm vào giỏ hàng hiện tại\n        url = `/api/public/carts/${cartId}/products/${productId}/quantity/${quantity}`;\n      } else {\n        // Nếu không có cartId, tạo giỏ hàng mới\n        url = `/api/public/carts/products/${productId}/quantity/${quantity}`;\n      }\n      const response = await api.post(url);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi thêm vào giỏ hàng:', error);\n      throw error;\n    }\n  },\n  // Cập nhật số lượng sản phẩm\n  updateQuantity: async (cartId, productId, quantity) => {\n    try {\n      const response = await api.put(`/api/public/carts/${cartId}/products/${productId}/quantity/${quantity}`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi cập nhật số lượng:', error);\n      throw error;\n    }\n  },\n  // Xóa sản phẩm khỏi giỏ hàng\n  removeFromCart: async (cartId, productId) => {\n    try {\n      const response = await api.delete(`/api/public/carts/${cartId}/products/${productId}`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi xóa sản phẩm:', error);\n      throw error;\n    }\n  },\n  // Tạo đơn hàng từ giỏ hàng\n  createOrder: async (email, cartId, paymentMethod) => {\n    try {\n      const response = await api.post(`/api/public/users/${email}/carts/${cartId}/payments/${paymentMethod}/order`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi tạo đơn hàng:', error);\n      throw error;\n    }\n  },\n  // Tính tổng tiền\n  calculateTotal: cartItems => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      var _item$product;\n      const price = ((_item$product = item.product) === null || _item$product === void 0 ? void 0 : _item$product.price) || 0;\n      return total + price * item.quantity;\n    }, 0);\n  }\n};\nexport default cartService;","map":{"version":3,"names":["api","cartService","getActiveCart","email","response","get","data","error","console","addToCart","cartId","productId","quantity","url","post","updateQuantity","put","removeFromCart","delete","createOrder","paymentMethod","calculateTotal","cartItems","length","reduce","total","item","_item$product","price","product"],"sources":["D:/JVA/frontend/src/services/cartService.js"],"sourcesContent":["// services/cartService.js\nimport api from './api';\n\nconst cartService = {\n  // Lấy giỏ hàng active của user\n  getActiveCart: async (email) => {\n    try {\n      const response = await api.get(`/api/public/users/${email}/carts/active`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi lấy giỏ hàng:', error);\n      throw error;\n    }\n  },\n\n  // Thêm sản phẩm vào giỏ hàng\n  addToCart: async (cartId, productId, quantity) => {\n    try {\n      let url;\n      if (cartId) {\n        // Nếu có cartId, thêm vào giỏ hàng hiện tại\n        url = `/api/public/carts/${cartId}/products/${productId}/quantity/${quantity}`;\n      } else {\n        // Nếu không có cartId, tạo giỏ hàng mới\n        url = `/api/public/carts/products/${productId}/quantity/${quantity}`;\n      }\n      \n      const response = await api.post(url);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi thêm vào giỏ hàng:', error);\n      throw error;\n    }\n  },\n\n  // Cập nhật số lượng sản phẩm\n  updateQuantity: async (cartId, productId, quantity) => {\n    try {\n      const response = await api.put(`/api/public/carts/${cartId}/products/${productId}/quantity/${quantity}`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi cập nhật số lượng:', error);\n      throw error;\n    }\n  },\n\n  // Xóa sản phẩm khỏi giỏ hàng\n  removeFromCart: async (cartId, productId) => {\n    try {\n      const response = await api.delete(`/api/public/carts/${cartId}/products/${productId}`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi xóa sản phẩm:', error);\n      throw error;\n    }\n  },\n\n  // Tạo đơn hàng từ giỏ hàng\n  createOrder: async (email, cartId, paymentMethod) => {\n    try {\n      const response = await api.post(`/api/public/users/${email}/carts/${cartId}/payments/${paymentMethod}/order`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Lỗi khi tạo đơn hàng:', error);\n      throw error;\n    }\n  },\n\n  // Tính tổng tiền\n  calculateTotal: (cartItems) => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    \n    return cartItems.reduce((total, item) => {\n      const price = item.product?.price || 0;\n      return total + (price * item.quantity);\n    }, 0);\n  }\n};\n\nexport default cartService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}