{"ast":null,"code":"// services/userService.js\nimport api from \"./api\";\nconst userService = {\n  // ==================== PUBLIC ENDPOINTS ====================\n\n  // üü¢ Public: L·∫•y th√¥ng tin user theo ID\n  async getUserById(userId) {\n    try {\n      console.log(`üì° Calling API: /public/users/${userId}`);\n      const {\n        data\n      } = await api.get(`/public/users/${userId}`);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y th√¥ng tin user:\", error);\n      throw error;\n    }\n  },\n  // üü¢ Public: L·∫•y th√¥ng tin user theo email\n  async getUserByEmail(email) {\n    try {\n      const {\n        data\n      } = await api.get(`/public/users/email/${email}`);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y th√¥ng tin user b·∫±ng email:\", error);\n      throw error;\n    }\n  },\n  // üü¢ Public: C·∫≠p nh·∫≠t th√¥ng tin user\n  async updateUser(userId, userData) {\n    try {\n      const {\n        data\n      } = await api.put(`/public/users/${userId}`, userData);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi c·∫≠p nh·∫≠t user:\", error);\n      throw error;\n    }\n  },\n  // ==================== ADMIN ENDPOINTS ====================\n\n  // üîê Admin: L·∫•y t·∫•t c·∫£ users\n  async getAllUsers() {\n    try {\n      const {\n        data\n      } = await api.get(\"/admin/users\");\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y danh s√°ch users:\", error);\n      throw error;\n    }\n  },\n  // üîê Admin: X√≥a user\n  async deleteUser(userId) {\n    try {\n      const {\n        data\n      } = await api.delete(`/admin/users/${userId}`);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi x√≥a user:\", error);\n      throw error;\n    }\n  },\n  // ==================== UTILITY METHODS ====================\n\n  // üü¢ Ki·ªÉm tra xem user c√≥ t·ªìn t·∫°i kh√¥ng\n  async checkUserExists(userId) {\n    try {\n      await this.getUserById(userId);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  },\n  // üü¢ L·∫•y th√¥ng tin user profile ƒë·∫ßy ƒë·ªß\n  // üü¢ L·∫•y th√¥ng tin user profile ƒë·∫ßy ƒë·ªß - S·ª¨A L·∫†I\n  async getUserProfile(userId) {\n    try {\n      console.log(`üîç Getting user profile for ID: ${userId}`);\n      const userData = await this.getUserById(userId);\n      console.log(\"üìä Raw API response:\", userData);\n\n      // ‚úÖ X·ª≠ l√Ω d·ªØ li·ªáu tr·∫£ v·ªÅ - QUAN TR·ªåNG: Ki·ªÉm tra c·∫£ 2 d·∫°ng field name\n      const processedData = {\n        // Gi·ªØ nguy√™n to√†n b·ªô d·ªØ li·ªáu g·ªëc\n        ...userData,\n        // ‚úÖ ƒê·∫£m b·∫£o c√≥ c·∫£ 2 d·∫°ng field name ƒë·ªÉ component c√≥ th·ªÉ s·ª≠ d·ª•ng\n        userId: userData.user_id || userData.userId || userId,\n        user_id: userData.user_id || userData.userId || userId,\n        // ‚úÖ X·ª≠ l√Ω first_name/firstName\n        firstName: userData.first_name || userData.firstName,\n        first_name: userData.first_name || userData.firstName,\n        // ‚úÖ X·ª≠ l√Ω last_name/lastName  \n        lastName: userData.last_name || userData.lastName,\n        last_name: userData.last_name || userData.lastName,\n        // ‚úÖ C√°c field kh√°c\n        email: userData.email,\n        mobileNumber: userData.mobile_number || userData.mobileNumber,\n        mobile_number: userData.mobile_number || userData.mobileNumber,\n        // ‚úÖ Full name ƒë·ªÉ ti·ªán s·ª≠ d·ª•ng\n        fullName: `${userData.first_name || userData.firstName || ''} ${userData.last_name || userData.lastName || ''}`.trim()\n      };\n      console.log(\"‚úÖ Processed user profile:\", processedData);\n      console.log(\"üîç First name check:\", {\n        'first_name': processedData.first_name,\n        'firstName': processedData.firstName,\n        'hasFirstName': !!(processedData.first_name || processedData.firstName)\n      });\n      return processedData;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y user profile:\", error);\n      throw error;\n    }\n  },\n  // üü¢ C·∫≠p nh·∫≠t profile user\n  async updateUserProfile(userId, profileData) {\n    try {\n      // Format data ƒë·ªÉ g·ª≠i l√™n server\n      const formattedData = {\n        first_name: profileData.firstName || profileData.first_name,\n        last_name: profileData.lastName || profileData.last_name,\n        mobile_number: profileData.mobileNumber || profileData.mobile_number,\n        email: profileData.email\n      };\n      const result = await this.updateUser(userId, formattedData);\n      return result;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi c·∫≠p nh·∫≠t profile:\", error);\n      throw error;\n    }\n  }\n};\nexport default userService;","map":{"version":3,"names":["api","userService","getUserById","userId","console","log","data","get","error","getUserByEmail","email","updateUser","userData","put","getAllUsers","deleteUser","delete","checkUserExists","getUserProfile","processedData","user_id","firstName","first_name","lastName","last_name","mobileNumber","mobile_number","fullName","trim","updateUserProfile","profileData","formattedData","result"],"sources":["D:/JVA/frontend/src/services/userService.js"],"sourcesContent":["// services/userService.js\nimport api from \"./api\";\n\nconst userService = {\n  // ==================== PUBLIC ENDPOINTS ====================\n  \n  // üü¢ Public: L·∫•y th√¥ng tin user theo ID\n async getUserById(userId) {\n    try {\n      console.log(`üì° Calling API: /public/users/${userId}`);\n      const { data } = await api.get(`/public/users/${userId}`);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y th√¥ng tin user:\", error);\n      throw error;\n    }\n  },\n\n  // üü¢ Public: L·∫•y th√¥ng tin user theo email\n  async getUserByEmail(email) {\n    try {\n      const { data } = await api.get(`/public/users/email/${email}`);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y th√¥ng tin user b·∫±ng email:\", error);\n      throw error;\n    }\n  },\n\n  // üü¢ Public: C·∫≠p nh·∫≠t th√¥ng tin user\n  async updateUser(userId, userData) {\n    try {\n      const { data } = await api.put(`/public/users/${userId}`, userData);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi c·∫≠p nh·∫≠t user:\", error);\n      throw error;\n    }\n  },\n\n  // ==================== ADMIN ENDPOINTS ====================\n\n  // üîê Admin: L·∫•y t·∫•t c·∫£ users\n  async getAllUsers() {\n    try {\n      const { data } = await api.get(\"/admin/users\");\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y danh s√°ch users:\", error);\n      throw error;\n    }\n  },\n\n  // üîê Admin: X√≥a user\n  async deleteUser(userId) {\n    try {\n      const { data } = await api.delete(`/admin/users/${userId}`);\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi x√≥a user:\", error);\n      throw error;\n    }\n  },\n\n  // ==================== UTILITY METHODS ====================\n\n  // üü¢ Ki·ªÉm tra xem user c√≥ t·ªìn t·∫°i kh√¥ng\n  async checkUserExists(userId) {\n    try {\n      await this.getUserById(userId);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  },\n\n  // üü¢ L·∫•y th√¥ng tin user profile ƒë·∫ßy ƒë·ªß\n // üü¢ L·∫•y th√¥ng tin user profile ƒë·∫ßy ƒë·ªß - S·ª¨A L·∫†I\nasync getUserProfile(userId) {\n  try {\n    console.log(`üîç Getting user profile for ID: ${userId}`);\n    const userData = await this.getUserById(userId);\n    \n    console.log(\"üìä Raw API response:\", userData);\n    \n    // ‚úÖ X·ª≠ l√Ω d·ªØ li·ªáu tr·∫£ v·ªÅ - QUAN TR·ªåNG: Ki·ªÉm tra c·∫£ 2 d·∫°ng field name\n    const processedData = {\n      // Gi·ªØ nguy√™n to√†n b·ªô d·ªØ li·ªáu g·ªëc\n      ...userData,\n      \n      // ‚úÖ ƒê·∫£m b·∫£o c√≥ c·∫£ 2 d·∫°ng field name ƒë·ªÉ component c√≥ th·ªÉ s·ª≠ d·ª•ng\n      userId: userData.user_id || userData.userId || userId,\n      user_id: userData.user_id || userData.userId || userId,\n      \n      // ‚úÖ X·ª≠ l√Ω first_name/firstName\n      firstName: userData.first_name || userData.firstName,\n      first_name: userData.first_name || userData.firstName,\n      \n      // ‚úÖ X·ª≠ l√Ω last_name/lastName  \n      lastName: userData.last_name || userData.lastName,\n      last_name: userData.last_name || userData.lastName,\n      \n      // ‚úÖ C√°c field kh√°c\n      email: userData.email,\n      mobileNumber: userData.mobile_number || userData.mobileNumber,\n      mobile_number: userData.mobile_number || userData.mobileNumber,\n      \n      // ‚úÖ Full name ƒë·ªÉ ti·ªán s·ª≠ d·ª•ng\n      fullName: `${userData.first_name || userData.firstName || ''} ${userData.last_name || userData.lastName || ''}`.trim()\n    };\n    \n    console.log(\"‚úÖ Processed user profile:\", processedData);\n    console.log(\"üîç First name check:\", {\n      'first_name': processedData.first_name,\n      'firstName': processedData.firstName,\n      'hasFirstName': !!(processedData.first_name || processedData.firstName)\n    });\n    \n    return processedData;\n  } catch (error) {\n    console.error(\"‚ùå L·ªói khi l·∫•y user profile:\", error);\n    throw error;\n  }\n},\n\n  // üü¢ C·∫≠p nh·∫≠t profile user\n  async updateUserProfile(userId, profileData) {\n    try {\n      // Format data ƒë·ªÉ g·ª≠i l√™n server\n      const formattedData = {\n        first_name: profileData.firstName || profileData.first_name,\n        last_name: profileData.lastName || profileData.last_name,\n        mobile_number: profileData.mobileNumber || profileData.mobile_number,\n        email: profileData.email\n      };\n\n      const result = await this.updateUser(userId, formattedData);\n      return result;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi c·∫≠p nh·∫≠t profile:\", error);\n      throw error;\n    }\n  }\n};\n\nexport default userService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}