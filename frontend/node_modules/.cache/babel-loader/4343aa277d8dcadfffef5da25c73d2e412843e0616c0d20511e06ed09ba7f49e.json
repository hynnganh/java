{"ast":null,"code":"// import api from \"./api\";\n\n// const categoryService = {\n//   // L·∫•y danh s√°ch (Public): GET /api/public/categories\n//   async getAllCategories() {\n//     try {\n//       const { data } = await api.get(\"/public/categories\");\n\n//       // ‚úÖ Ki·ªÉm tra n·∫øu API c√≥ tr·∫£ v·ªÅ content\n//       if (Array.isArray(data)) return data;\n//       if (data.content && Array.isArray(data.content)) return data.content;\n\n//       console.warn(\"‚ö†Ô∏è D·ªØ li·ªáu danh m·ª•c kh√¥ng ph·∫£i m·∫£ng:\", data);\n//       return [];\n//     } catch (error) {\n//       console.error(\"‚ùå L·ªói khi l·∫•y danh m·ª•c:\", error);\n//       return [];\n//     }\n//   },\n\n//   // T·∫°o m·ªõi (Admin): POST /api/admin/categories\n//   async createCategory(categoryData) {\n//     const token = localStorage.getItem(\"token\"); // L·∫•y token ƒë·ªÉ check quy·ªÅn ADMIN\n//     return await api.post(\"/admin/categories\", categoryData, {\n//       headers: { Authorization: `Bearer ${token}` }\n//     });\n//   },\n\n//   // C·∫≠p nh·∫≠t (Admin): PUT /api/admin/categories/{id}\n//   async updateCategory(categoryId, categoryData) {\n//     const token = localStorage.getItem(\"token\");\n//     return await api.put(`/admin/categories/${categoryId}`, categoryData, {\n//       headers: { Authorization: `Bearer ${token}` }\n//     });\n//   },\n\n//   // X√≥a (Admin): DELETE /api/admin/categories/{id}\n//   async deleteCategory(categoryId) {\n//     const token = localStorage.getItem(\"token\");\n//     return await api.delete(`/admin/categories/${categoryId}`, {\n//       headers: { Authorization: `Bearer ${token}` }\n//     });\n//   }\n// };\n\n// export default categoryService;\n\nimport api from \"./api\";\nconst categoryService = {\n  // üîê H√†m b·ªï tr·ª£ l·∫•y Token - Check c·∫£ 2 key ƒë·ªÉ tr√°nh b·ªã vƒÉng\n  getAuthHeader() {\n    const token = localStorage.getItem(\"token\") || localStorage.getItem(\"admin-token\");\n    console.log(\"üîë [Service] S·ª≠ d·ª•ng Token:\", token ? \"‚úÖ ƒê√£ l·∫•y\" : \"‚ùå KH√îNG TH·∫§Y\");\n    return {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n      }\n    };\n  },\n  // üü¢ Public: L·∫•y t·∫•t c·∫£ danh m·ª•c\n  async getAllCategories() {\n    try {\n      const {\n        data\n      } = await api.get(\"/public/categories\");\n      console.log(\"üì• [Service] GET Data:\", data);\n\n      // X·ª≠ l√Ω linh ho·∫°t cho c·∫£ CategoryResponse (content) ho·∫∑c m·∫£ng thu·∫ßn\n      if (data.content && Array.isArray(data.content)) return data.content;\n      if (Array.isArray(data)) return data;\n      return [];\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y danh m·ª•c:\", error);\n      return [];\n    }\n  },\n  async getProductsByCategory(categoryId) {\n    try {\n      const {\n        data\n      } = await api.get(`/public/categories/${categoryId}`);\n      console.log(`üì• [Service] GET Products for Category ${categoryId}:`, data);\n      if (data.content && Array.isArray(data.content)) return data.content;\n      if (data.products && Array.isArray(data.products)) return data.products;\n      if (Array.isArray(data)) return data;\n      return [];\n    } catch (error) {\n      console.error(`‚ùå L·ªói khi l·∫•y s·∫£n ph·∫©m c·ªßa danh m·ª•c ${categoryId}:`, error);\n      throw error;\n    }\n  },\n  // üî¥ Admin: T·∫°o danh m·ª•c m·ªõi\n  async createCategory(categoryDTO) {\n    try {\n      // POST /api/admin/categories\n      const {\n        data\n      } = await api.post(\"/admin/categories\", categoryDTO, this.getAuthHeader());\n      return data;\n    } catch (error) {\n      var _error$response;\n      console.error(\"‚ùå L·ªói Admin t·∫°o:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      throw error;\n    }\n  },\n  // üü† Admin: C·∫≠p nh·∫≠t danh m·ª•c\n  async updateCategory(categoryId, categoryDTO) {\n    try {\n      // PUT /api/admin/categories/{categoryId}\n      const {\n        data\n      } = await api.put(`/admin/categories/${categoryId}`, categoryDTO, this.getAuthHeader());\n      return data;\n    } catch (error) {\n      var _error$response2;\n      console.error(\"‚ùå L·ªói Admin c·∫≠p nh·∫≠t:\", ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n      throw error;\n    }\n  },\n  // üü° Admin: X√≥a danh m·ª•c\n  async deleteCategory(categoryId) {\n    try {\n      // DELETE /api/admin/categories/{categoryId}\n      const {\n        data\n      } = await api.delete(`/admin/categories/${categoryId}`, this.getAuthHeader());\n      return data;\n    } catch (error) {\n      var _error$response3;\n      console.error(\"‚ùå L·ªói Admin x√≥a:\", ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error.message);\n      throw error;\n    }\n  }\n};\nexport default categoryService;","map":{"version":3,"names":["api","categoryService","getAuthHeader","token","localStorage","getItem","console","log","headers","Authorization","getAllCategories","data","get","content","Array","isArray","error","getProductsByCategory","categoryId","products","createCategory","categoryDTO","post","_error$response","response","message","updateCategory","put","_error$response2","deleteCategory","delete","_error$response3"],"sources":["E:/Java/DoAn/frontend/src/services/categoryService.js"],"sourcesContent":["// import api from \"./api\";\n\n// const categoryService = {\n//   // L·∫•y danh s√°ch (Public): GET /api/public/categories\n//   async getAllCategories() {\n//     try {\n//       const { data } = await api.get(\"/public/categories\");\n\n//       // ‚úÖ Ki·ªÉm tra n·∫øu API c√≥ tr·∫£ v·ªÅ content\n//       if (Array.isArray(data)) return data;\n//       if (data.content && Array.isArray(data.content)) return data.content;\n\n//       console.warn(\"‚ö†Ô∏è D·ªØ li·ªáu danh m·ª•c kh√¥ng ph·∫£i m·∫£ng:\", data);\n//       return [];\n//     } catch (error) {\n//       console.error(\"‚ùå L·ªói khi l·∫•y danh m·ª•c:\", error);\n//       return [];\n//     }\n//   },\n\n//   // T·∫°o m·ªõi (Admin): POST /api/admin/categories\n//   async createCategory(categoryData) {\n//     const token = localStorage.getItem(\"token\"); // L·∫•y token ƒë·ªÉ check quy·ªÅn ADMIN\n//     return await api.post(\"/admin/categories\", categoryData, {\n//       headers: { Authorization: `Bearer ${token}` }\n//     });\n//   },\n\n//   // C·∫≠p nh·∫≠t (Admin): PUT /api/admin/categories/{id}\n//   async updateCategory(categoryId, categoryData) {\n//     const token = localStorage.getItem(\"token\");\n//     return await api.put(`/admin/categories/${categoryId}`, categoryData, {\n//       headers: { Authorization: `Bearer ${token}` }\n//     });\n//   },\n\n//   // X√≥a (Admin): DELETE /api/admin/categories/{id}\n//   async deleteCategory(categoryId) {\n//     const token = localStorage.getItem(\"token\");\n//     return await api.delete(`/admin/categories/${categoryId}`, {\n//       headers: { Authorization: `Bearer ${token}` }\n//     });\n//   }\n// };\n\n// export default categoryService;\n\nimport api from \"./api\";\n\nconst categoryService = {\n  // üîê H√†m b·ªï tr·ª£ l·∫•y Token - Check c·∫£ 2 key ƒë·ªÉ tr√°nh b·ªã vƒÉng\n  getAuthHeader() {\n    const token = localStorage.getItem(\"token\") || localStorage.getItem(\"admin-token\");\n    console.log(\"üîë [Service] S·ª≠ d·ª•ng Token:\", token ? \"‚úÖ ƒê√£ l·∫•y\" : \"‚ùå KH√îNG TH·∫§Y\");\n    return { \n      headers: { \n        Authorization: `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n      } \n    };\n  },\n\n  // üü¢ Public: L·∫•y t·∫•t c·∫£ danh m·ª•c\n  async getAllCategories() {\n    try {\n      const { data } = await api.get(\"/public/categories\");\n      console.log(\"üì• [Service] GET Data:\", data);\n\n      // X·ª≠ l√Ω linh ho·∫°t cho c·∫£ CategoryResponse (content) ho·∫∑c m·∫£ng thu·∫ßn\n      if (data.content && Array.isArray(data.content)) return data.content;\n      if (Array.isArray(data)) return data;\n      \n      return [];\n    } catch (error) {\n      console.error(\"‚ùå L·ªói khi l·∫•y danh m·ª•c:\", error);\n      return [];\n    }\n  },\n\n  async getProductsByCategory(categoryId) {\n    try {\n      const { data } = await api.get(`/public/categories/${categoryId}`);\n      \n      console.log(`üì• [Service] GET Products for Category ${categoryId}:`, data);\n\n      if (data.content && Array.isArray(data.content)) return data.content;\n      if (data.products && Array.isArray(data.products)) return data.products;\n      if (Array.isArray(data)) return data;\n\n      return [];\n    } catch (error) {\n      console.error(`‚ùå L·ªói khi l·∫•y s·∫£n ph·∫©m c·ªßa danh m·ª•c ${categoryId}:`, error);\n      throw error; \n    }\n  },\n\n  // üî¥ Admin: T·∫°o danh m·ª•c m·ªõi\n  async createCategory(categoryDTO) {\n    try {\n      // POST /api/admin/categories\n      const { data } = await api.post(\"/admin/categories\", categoryDTO, this.getAuthHeader());\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói Admin t·∫°o:\", error.response?.data || error.message);\n      throw error; \n    }\n  },\n\n  // üü† Admin: C·∫≠p nh·∫≠t danh m·ª•c\n  async updateCategory(categoryId, categoryDTO) {\n    try {\n      // PUT /api/admin/categories/{categoryId}\n      const { data } = await api.put(`/admin/categories/${categoryId}`, categoryDTO, this.getAuthHeader());\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói Admin c·∫≠p nh·∫≠t:\", error.response?.data || error.message);\n      throw error;\n    }\n  },\n\n  // üü° Admin: X√≥a danh m·ª•c\n  async deleteCategory(categoryId) {\n    try {\n      // DELETE /api/admin/categories/{categoryId}\n      const { data } = await api.delete(`/admin/categories/${categoryId}`, this.getAuthHeader());\n      return data;\n    } catch (error) {\n      console.error(\"‚ùå L·ªói Admin x√≥a:\", error.response?.data || error.message);\n      throw error;\n    }\n  }\n};\n\nexport default categoryService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}