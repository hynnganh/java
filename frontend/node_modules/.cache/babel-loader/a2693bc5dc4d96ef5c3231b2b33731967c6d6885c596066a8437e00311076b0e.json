{"ast":null,"code":"import api from \"./api\";\nconst userService = {\n  // üü¢ L·∫•y th√¥ng tin user theo ID\n  async getUserById(userId) {\n    try {\n      console.log(`üì° Calling API: /public/users/${userId}`);\n      const response = await api.get(`/public/users/${userId}`);\n      console.log(\"‚úÖ User data received:\", response.data);\n      return response.data;\n    } catch (error) {\n      console.error(\"‚ùå Error getting user by ID:\", error);\n      throw error;\n    }\n  },\n  // src/services/userService.js\n  async getUserByEmail(email) {\n    try {\n      console.log(`üì° Getting user by email: ${email}`);\n      const response = await api.get(`/public/users/email/${email}`);\n      console.log(\"‚úÖ User by email - FULL RESPONSE:\", response);\n      console.log(\"‚úÖ User by email - DATA:\", response.data);\n\n      // ‚úÖ DEBUG: Ki·ªÉm tra c·∫•u tr√∫c response\n      if (response.data) {\n        console.log(\"üîç Response structure:\", Object.keys(response.data));\n        console.log(\"üîç User ID fields:\", {\n          user_id: response.data.user_id,\n          userId: response.data.userId,\n          id: response.data.id\n        });\n      }\n      return response.data;\n    } catch (error) {\n      console.error(\"‚ùå Error getting user by email:\", error);\n      throw error;\n    }\n  },\n  // src/services/userService.js\n  async updateUser(userId, userData) {\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        throw new Error(\"No authentication token found\");\n      }\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`\n        }\n      };\n\n      // ‚úÖ D√πng camelCase theo DTO\n      const updateData = {\n        firstName: userData.firstName,\n        lastName: userData.lastName,\n        email: userData.email,\n        mobileNumber: userData.mobileNumber\n      };\n      console.log(\"üíæ Sending camelCase data to API:\", updateData);\n      const response = await api.put(`/public/users/${userId}`, updateData, config);\n      console.log(\"‚úÖ Database update successful:\", response.data);\n      return response.data;\n    } catch (error) {\n      console.error(\"‚ùå Database update failed:\", error);\n      throw error;\n    }\n  },\n  // üü¢ L·∫•y th√¥ng tin user profile (compatibility)\n  async getUserProfile(userId) {\n    return this.getUserById(userId);\n  }\n};\nexport default userService;","map":{"version":3,"names":["api","userService","getUserById","userId","console","log","response","get","data","error","getUserByEmail","email","Object","keys","user_id","id","updateUser","userData","token","localStorage","getItem","Error","config","headers","updateData","firstName","lastName","mobileNumber","put","getUserProfile"],"sources":["E:/Java/DoAn/frontend/src/services/userService.js"],"sourcesContent":["import api from \"./api\";\n\nconst userService = {\n  // üü¢ L·∫•y th√¥ng tin user theo ID\n  async getUserById(userId) {\n    try {\n      console.log(`üì° Calling API: /public/users/${userId}`);\n      const response = await api.get(`/public/users/${userId}`);\n      console.log(\"‚úÖ User data received:\", response.data);\n      return response.data;\n    } catch (error) {\n      console.error(\"‚ùå Error getting user by ID:\", error);\n      throw error;\n    }\n  },\n\n  // src/services/userService.js\nasync getUserByEmail(email) {\n  try {\n    console.log(`üì° Getting user by email: ${email}`);\n    const response = await api.get(`/public/users/email/${email}`);\n    console.log(\"‚úÖ User by email - FULL RESPONSE:\", response);\n    console.log(\"‚úÖ User by email - DATA:\", response.data);\n    \n    // ‚úÖ DEBUG: Ki·ªÉm tra c·∫•u tr√∫c response\n    if (response.data) {\n      console.log(\"üîç Response structure:\", Object.keys(response.data));\n      console.log(\"üîç User ID fields:\", {\n        user_id: response.data.user_id,\n        userId: response.data.userId,\n        id: response.data.id\n      });\n    }\n    \n    return response.data;\n  } catch (error) {\n    console.error(\"‚ùå Error getting user by email:\", error);\n    throw error;\n  }\n},\n// src/services/userService.js\nasync updateUser(userId, userData) {\n  try {\n    const token = localStorage.getItem(\"token\");\n    \n    if (!token) {\n      throw new Error(\"No authentication token found\");\n    }\n\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    };\n\n    // ‚úÖ D√πng camelCase theo DTO\n    const updateData = {\n      firstName: userData.firstName,\n      lastName: userData.lastName,\n      email: userData.email,\n      mobileNumber: userData.mobileNumber\n    };\n\n    console.log(\"üíæ Sending camelCase data to API:\", updateData);\n\n    const response = await api.put(`/public/users/${userId}`, updateData, config);\n    \n    console.log(\"‚úÖ Database update successful:\", response.data);\n    return response.data;\n  } catch (error) {\n    console.error(\"‚ùå Database update failed:\", error);\n    throw error;\n  }\n},\n  // üü¢ L·∫•y th√¥ng tin user profile (compatibility)\n  async getUserProfile(userId) {\n    return this.getUserById(userId);\n  }\n};\n\nexport default userService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}