{"ast":null,"code":"// services/cartService.js\nimport api from './api';\nconst cartService = {\n  // ========== CART MANAGEMENT ==========\n\n  // T·∫°o gi·ªè h√†ng m·ªõi\n  createCart: async email => {\n    try {\n      const response = await api.post(`/public/users/${email}/carts`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi t·∫°o gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n  // L·∫•y gi·ªè h√†ng active\n  getActiveCart: async email => {\n    try {\n      const response = await api.get(`/public/users/${email}/carts/active`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n  // L·∫•y gi·ªè h√†ng theo ID\n  getCart: async (email, cartId) => {\n    try {\n      const response = await api.get(`/public/users/${email}/carts/${cartId}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n  // Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng\n  addToCart: async (cartId, productId, quantity) => {\n    try {\n      const response = await api.post(`/public/carts/${cartId}/products/${productId}/quantity/${quantity}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi th√™m v√†o gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n  // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng\n  updateQuantity: async (cartId, productId, quantity) => {\n    try {\n      const response = await api.put(`/public/carts/${cartId}/products/${productId}/quantity/${quantity}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng:', error);\n      throw error;\n    }\n  },\n  // X√≥a s·∫£n ph·∫©m\n  removeFromCart: async (cartId, productId) => {\n    try {\n      const response = await api.delete(`/public/carts/${cartId}/products/${productId}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi x√≥a s·∫£n ph·∫©m:', error);\n      throw error;\n    }\n  },\n  // ========== ADMIN CART MANAGEMENT ==========\n\n  // L·∫•y t·∫•t c·∫£ gi·ªè h√†ng (ADMIN)\n  getAllCarts: async () => {\n    try {\n      const response = await api.get('/admin/carts');\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y t·∫•t c·∫£ gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n  // L·∫•y chi ti·∫øt gi·ªè h√†ng theo ID (ADMIN)\n  getCartByIdForAdmin: async cartId => {\n    try {\n      const response = await api.get(`/admin/carts/${cartId}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y chi ti·∫øt gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n  // L·∫•y gi·ªè h√†ng c·ªßa user c·ª• th·ªÉ (ADMIN)\n  getUserCarts: async userEmail => {\n    try {\n      const response = await api.get(`/admin/users/${userEmail}/carts`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng c·ªßa user:', error);\n      throw error;\n    }\n  },\n  // ========== ORDER MANAGEMENT ==========\n\n  // T·∫°o ƒë∆°n h√†ng v·ªõi shipping address\n  createOrder: async (email, cartId, paymentMethod, shippingAddress) => {\n    try {\n      console.log('üõí Creating order with:', {\n        email,\n        cartId,\n        paymentMethod,\n        shippingAddress\n      });\n      const response = await api.post(`/public/users/${email}/carts/${cartId}/place-order`, null, {\n        params: {\n          paymentMethod: paymentMethod,\n          shippingAddress: shippingAddress\n        }\n      });\n      console.log('‚úÖ Order created successfully:', response.data);\n      return response.data;\n    } catch (error) {\n      var _error$response, _error$response2, _error$config;\n      console.error('‚ùå Order creation failed:', error);\n      console.error('üî¥ Error details:', {\n        status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n        data: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data,\n        message: error.message,\n        url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url\n      });\n      throw error;\n    }\n  },\n  // ========== CART ANALYSIS ==========\n\n  // Ph√¢n t√≠ch gi·ªè h√†ng - th·ªëng k√™ s·∫£n ph·∫©m\n  analyzeCart: cart => {\n    if (!cart || !cart.products) return null;\n    const analysis = {\n      totalItems: 0,\n      totalValue: 0,\n      productCount: cart.products.length,\n      itemsByCategory: {},\n      mostExpensiveItem: null,\n      cheapestItem: null\n    };\n    cart.products.forEach(item => {\n      var _item$category;\n      const quantity = item.quantity || 1;\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const totalValue = price * quantity;\n\n      // T·ªïng s·ªë l∆∞·ª£ng s·∫£n ph·∫©m\n      analysis.totalItems += quantity;\n\n      // T·ªïng gi√° tr·ªã\n      analysis.totalValue += totalValue;\n\n      // Ph√¢n lo·∫°i theo category\n      const category = ((_item$category = item.category) === null || _item$category === void 0 ? void 0 : _item$category.categoryName) || 'Kh√¥ng ph√¢n lo·∫°i';\n      if (!analysis.itemsByCategory[category]) {\n        analysis.itemsByCategory[category] = {\n          count: 0,\n          value: 0,\n          items: []\n        };\n      }\n      analysis.itemsByCategory[category].count += quantity;\n      analysis.itemsByCategory[category].value += totalValue;\n      analysis.itemsByCategory[category].items.push(item);\n\n      // S·∫£n ph·∫©m ƒë·∫Øt nh·∫•t\n      if (!analysis.mostExpensiveItem || price > analysis.mostExpensiveItem.price) {\n        analysis.mostExpensiveItem = {\n          productId: item.productId,\n          productName: item.productName,\n          price: price,\n          quantity: quantity,\n          totalValue: totalValue\n        };\n      }\n\n      // S·∫£n ph·∫©m r·∫ª nh·∫•t\n      if (!analysis.cheapestItem || price < analysis.cheapestItem.price) {\n        analysis.cheapestItem = {\n          productId: item.productId,\n          productName: item.productName,\n          price: price,\n          quantity: quantity,\n          totalValue: totalValue\n        };\n      }\n    });\n    return analysis;\n  },\n  // L·∫•y th·ªëng k√™ t·ªïng quan gi·ªè h√†ng\n  getCartStatistics: cart => {\n    if (!cart) return null;\n    const analysis = cartService.analyzeCart(cart);\n    if (!analysis) return null;\n    return {\n      cartId: cart.cartId,\n      userId: cart.userId,\n      userEmail: cart.userEmail,\n      totalProducts: analysis.productCount,\n      totalItems: analysis.totalItems,\n      totalValue: analysis.totalValue,\n      averageItemValue: analysis.totalValue / analysis.totalItems,\n      categories: Object.keys(analysis.itemsByCategory).length,\n      mostExpensiveProduct: analysis.mostExpensiveItem,\n      cheapestProduct: analysis.cheapestItem\n    };\n  },\n  // ========== CART ITEMS UTILITIES ==========\n\n  // T√¨m s·∫£n ph·∫©m trong gi·ªè h√†ng\n  findProductInCart: (cart, productId) => {\n    if (!cart || !cart.products) return null;\n    return cart.products.find(item => item.productId === productId);\n  },\n  // Ki·ªÉm tra s·∫£n ph·∫©m c√≥ trong gi·ªè h√†ng kh√¥ng\n  isProductInCart: (cart, productId) => {\n    return cartService.findProductInCart(cart, productId) !== null;\n  },\n  // L·∫•y s·ªë l∆∞·ª£ng s·∫£n ph·∫©m c·ª• th·ªÉ\n  getProductQuantity: (cart, productId) => {\n    const product = cartService.findProductInCart(cart, productId);\n    return product ? product.quantity || 1 : 0;\n  },\n  // ========== PRICE CALCULATIONS ==========\n\n  // T√≠nh t·ªïng ti·ªÅn c·ªßa gi·ªè h√†ng\n  calculateTotal: cartItems => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const quantity = item.quantity || 1;\n      return total + price * quantity;\n    }, 0);\n  },\n  // T√≠nh t·ªïng ti·ªÅn sau discount\n  calculateDiscountedTotal: cartItems => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      const originalPrice = item.price || 0;\n      const discountedPrice = item.specialPrice || originalPrice;\n      const quantity = item.quantity || 1;\n      return total + discountedPrice * quantity;\n    }, 0);\n  },\n  // T√≠nh t·ªïng s·ªë ti·ªÅn discount\n  calculateTotalDiscount: cartItems => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      const originalPrice = item.price || 0;\n      const discountedPrice = item.specialPrice || originalPrice;\n      const quantity = item.quantity || 1;\n      const discountAmount = (originalPrice - discountedPrice) * quantity;\n      return total + Math.max(0, discountAmount);\n    }, 0);\n  },\n  // ========== FORMATTING ==========\n\n  // Format price hi·ªÉn th·ªã\n  formatPrice: price => {\n    return (Number(price) || 0).toLocaleString('vi-VN', {\n      style: 'currency',\n      currency: 'VND'\n    });\n  },\n  // Format s·ªë l∆∞·ª£ng\n  formatQuantity: quantity => {\n    return quantity || 1;\n  },\n  // ========== CART VALIDATION ==========\n\n  // Ki·ªÉm tra gi·ªè h√†ng h·ª£p l·ªá\n  validateCart: cart => {\n    if (!cart) return {\n      isValid: false,\n      message: 'Gi·ªè h√†ng kh√¥ng t·ªìn t·∫°i'\n    };\n    if (!cart.products || cart.products.length === 0) {\n      return {\n        isValid: false,\n        message: 'Gi·ªè h√†ng tr·ªëng'\n      };\n    }\n    const errors = [];\n    let totalCalculated = 0;\n    cart.products.forEach((item, index) => {\n      if (!item.productId) {\n        errors.push(`S·∫£n ph·∫©m th·ª© ${index + 1} kh√¥ng c√≥ ID`);\n      }\n      if (!item.productName) {\n        errors.push(`S·∫£n ph·∫©m th·ª© ${index + 1} kh√¥ng c√≥ t√™n`);\n      }\n      if (!item.quantity || item.quantity < 1) {\n        errors.push(`S·∫£n ph·∫©m \"${item.productName}\" c√≥ s·ªë l∆∞·ª£ng kh√¥ng h·ª£p l·ªá`);\n      }\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const quantity = item.quantity || 1;\n      totalCalculated += price * quantity;\n    });\n\n    // Ki·ªÉm tra t·ªïng ti·ªÅn kh·ªõp\n    const cartTotal = cart.totalPrice || 0;\n    if (Math.abs(totalCalculated - cartTotal) > 1) {\n      errors.push(`T·ªïng ti·ªÅn kh√¥ng kh·ªõp: ${cartTotal} vs ${totalCalculated}`);\n    }\n    return {\n      isValid: errors.length === 0,\n      message: errors.length === 0 ? 'Gi·ªè h√†ng h·ª£p l·ªá' : errors.join(', '),\n      errors: errors,\n      calculatedTotal: totalCalculated,\n      cartTotal: cartTotal\n    };\n  },\n  // ========== EXPORT DATA ==========\n\n  // Xu·∫•t d·ªØ li·ªáu gi·ªè h√†ng ƒë·ªÉ hi·ªÉn th·ªã\n  exportCartData: cart => {\n    var _cart$products;\n    if (!cart) return null;\n    const analysis = cartService.analyzeCart(cart);\n    const validation = cartService.validateCart(cart);\n    return {\n      basicInfo: {\n        cartId: cart.cartId,\n        userId: cart.userId,\n        userEmail: cart.userEmail,\n        totalPrice: cart.totalPrice,\n        createdAt: cart.createdAt,\n        isActive: cart.isActive\n      },\n      products: ((_cart$products = cart.products) === null || _cart$products === void 0 ? void 0 : _cart$products.map(item => {\n        var _item$category2;\n        return {\n          productId: item.productId,\n          productName: item.productName,\n          image: item.image,\n          price: item.price,\n          specialPrice: item.specialPrice,\n          productPrice: item.productPrice,\n          discount: item.discount,\n          quantity: item.quantity,\n          category: (_item$category2 = item.category) === null || _item$category2 === void 0 ? void 0 : _item$category2.categoryName,\n          totalValue: (item.productPrice || item.specialPrice || item.price || 0) * (item.quantity || 1)\n        };\n      })) || [],\n      statistics: analysis,\n      validation: validation\n    };\n  },\n  // ========== CART COMPARISON ==========\n\n  // So s√°nh hai gi·ªè h√†ng\n  compareCarts: (cart1, cart2) => {\n    const products1 = (cart1 === null || cart1 === void 0 ? void 0 : cart1.products) || [];\n    const products2 = (cart2 === null || cart2 === void 0 ? void 0 : cart2.products) || [];\n    const differences = {\n      added: [],\n      removed: [],\n      changed: []\n    };\n\n    // T√¨m s·∫£n ph·∫©m m·ªõi ƒë∆∞·ª£c th√™m\n    products2.forEach(product2 => {\n      const existingProduct = products1.find(p1 => p1.productId === product2.productId);\n      if (!existingProduct) {\n        differences.added.push(product2);\n      }\n    });\n\n    // T√¨m s·∫£n ph·∫©m b·ªã x√≥a\n    products1.forEach(product1 => {\n      const existingProduct = products2.find(p2 => p2.productId === product1.productId);\n      if (!existingProduct) {\n        differences.removed.push(product1);\n      }\n    });\n\n    // T√¨m s·∫£n ph·∫©m thay ƒë·ªïi s·ªë l∆∞·ª£ng\n    products1.forEach(product1 => {\n      const product2 = products2.find(p2 => p2.productId === product1.productId);\n      if (product2 && product1.quantity !== product2.quantity) {\n        differences.changed.push({\n          productId: product1.productId,\n          productName: product1.productName,\n          oldQuantity: product1.quantity,\n          newQuantity: product2.quantity,\n          change: product2.quantity - product1.quantity\n        });\n      }\n    });\n    return differences;\n  }\n};\nexport default cartService;","map":{"version":3,"names":["api","cartService","createCart","email","response","post","data","error","console","getActiveCart","get","getCart","cartId","addToCart","productId","quantity","updateQuantity","put","removeFromCart","delete","getAllCarts","getCartByIdForAdmin","getUserCarts","userEmail","createOrder","paymentMethod","shippingAddress","log","params","_error$response","_error$response2","_error$config","status","message","url","config","analyzeCart","cart","products","analysis","totalItems","totalValue","productCount","length","itemsByCategory","mostExpensiveItem","cheapestItem","forEach","item","_item$category","price","productPrice","specialPrice","category","categoryName","count","value","items","push","productName","getCartStatistics","userId","totalProducts","averageItemValue","categories","Object","keys","mostExpensiveProduct","cheapestProduct","findProductInCart","find","isProductInCart","getProductQuantity","product","calculateTotal","cartItems","reduce","total","calculateDiscountedTotal","originalPrice","discountedPrice","calculateTotalDiscount","discountAmount","Math","max","formatPrice","Number","toLocaleString","style","currency","formatQuantity","validateCart","isValid","errors","totalCalculated","index","cartTotal","totalPrice","abs","join","calculatedTotal","exportCartData","_cart$products","validation","basicInfo","createdAt","isActive","map","_item$category2","image","discount","statistics","compareCarts","cart1","cart2","products1","products2","differences","added","removed","changed","product2","existingProduct","p1","product1","p2","oldQuantity","newQuantity","change"],"sources":["D:/JVA/frontend/src/services/cartService.js"],"sourcesContent":["// services/cartService.js\nimport api from './api';\n\nconst cartService = {\n  // ========== CART MANAGEMENT ==========\n\n  // T·∫°o gi·ªè h√†ng m·ªõi\n  createCart: async (email) => {\n    try {\n      const response = await api.post(`/public/users/${email}/carts`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi t·∫°o gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n\n  // L·∫•y gi·ªè h√†ng active\n  getActiveCart: async (email) => {\n    try {\n      const response = await api.get(`/public/users/${email}/carts/active`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n\n  // L·∫•y gi·ªè h√†ng theo ID\n  getCart: async (email, cartId) => {\n    try {\n      const response = await api.get(`/public/users/${email}/carts/${cartId}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n\n  // Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng\n  addToCart: async (cartId, productId, quantity) => {\n    try {\n      const response = await api.post(`/public/carts/${cartId}/products/${productId}/quantity/${quantity}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi th√™m v√†o gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n\n  // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng\n  updateQuantity: async (cartId, productId, quantity) => {\n    try {\n      const response = await api.put(`/public/carts/${cartId}/products/${productId}/quantity/${quantity}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng:', error);\n      throw error;\n    }\n  },\n\n  // X√≥a s·∫£n ph·∫©m\n  removeFromCart: async (cartId, productId) => {\n    try {\n      const response = await api.delete(`/public/carts/${cartId}/products/${productId}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi x√≥a s·∫£n ph·∫©m:', error);\n      throw error;\n    }\n  },\n\n  // ========== ADMIN CART MANAGEMENT ==========\n\n  // L·∫•y t·∫•t c·∫£ gi·ªè h√†ng (ADMIN)\n  getAllCarts: async () => {\n    try {\n      const response = await api.get('/admin/carts');\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y t·∫•t c·∫£ gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n\n  // L·∫•y chi ti·∫øt gi·ªè h√†ng theo ID (ADMIN)\n  getCartByIdForAdmin: async (cartId) => {\n    try {\n      const response = await api.get(`/admin/carts/${cartId}`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y chi ti·∫øt gi·ªè h√†ng:', error);\n      throw error;\n    }\n  },\n\n  // L·∫•y gi·ªè h√†ng c·ªßa user c·ª• th·ªÉ (ADMIN)\n  getUserCarts: async (userEmail) => {\n    try {\n      const response = await api.get(`/admin/users/${userEmail}/carts`);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå L·ªói khi l·∫•y gi·ªè h√†ng c·ªßa user:', error);\n      throw error;\n    }\n  },\n\n  // ========== ORDER MANAGEMENT ==========\n\n  // T·∫°o ƒë∆°n h√†ng v·ªõi shipping address\n  createOrder: async (email, cartId, paymentMethod, shippingAddress) => {\n    try {\n      console.log('üõí Creating order with:', { email, cartId, paymentMethod, shippingAddress });\n      \n      const response = await api.post(\n        `/public/users/${email}/carts/${cartId}/place-order`,\n        null,\n        {\n          params: {\n            paymentMethod: paymentMethod,\n            shippingAddress: shippingAddress\n          }\n        }\n      );\n      \n      console.log('‚úÖ Order created successfully:', response.data);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå Order creation failed:', error);\n      console.error('üî¥ Error details:', {\n        status: error.response?.status,\n        data: error.response?.data,\n        message: error.message,\n        url: error.config?.url\n      });\n      throw error;\n    }\n  },\n\n  // ========== CART ANALYSIS ==========\n\n  // Ph√¢n t√≠ch gi·ªè h√†ng - th·ªëng k√™ s·∫£n ph·∫©m\n  analyzeCart: (cart) => {\n    if (!cart || !cart.products) return null;\n\n    const analysis = {\n      totalItems: 0,\n      totalValue: 0,\n      productCount: cart.products.length,\n      itemsByCategory: {},\n      mostExpensiveItem: null,\n      cheapestItem: null\n    };\n\n    cart.products.forEach(item => {\n      const quantity = item.quantity || 1;\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const totalValue = price * quantity;\n\n      // T·ªïng s·ªë l∆∞·ª£ng s·∫£n ph·∫©m\n      analysis.totalItems += quantity;\n      \n      // T·ªïng gi√° tr·ªã\n      analysis.totalValue += totalValue;\n\n      // Ph√¢n lo·∫°i theo category\n      const category = item.category?.categoryName || 'Kh√¥ng ph√¢n lo·∫°i';\n      if (!analysis.itemsByCategory[category]) {\n        analysis.itemsByCategory[category] = {\n          count: 0,\n          value: 0,\n          items: []\n        };\n      }\n      analysis.itemsByCategory[category].count += quantity;\n      analysis.itemsByCategory[category].value += totalValue;\n      analysis.itemsByCategory[category].items.push(item);\n\n      // S·∫£n ph·∫©m ƒë·∫Øt nh·∫•t\n      if (!analysis.mostExpensiveItem || price > analysis.mostExpensiveItem.price) {\n        analysis.mostExpensiveItem = {\n          productId: item.productId,\n          productName: item.productName,\n          price: price,\n          quantity: quantity,\n          totalValue: totalValue\n        };\n      }\n\n      // S·∫£n ph·∫©m r·∫ª nh·∫•t\n      if (!analysis.cheapestItem || price < analysis.cheapestItem.price) {\n        analysis.cheapestItem = {\n          productId: item.productId,\n          productName: item.productName,\n          price: price,\n          quantity: quantity,\n          totalValue: totalValue\n        };\n      }\n    });\n\n    return analysis;\n  },\n\n  // L·∫•y th·ªëng k√™ t·ªïng quan gi·ªè h√†ng\n  getCartStatistics: (cart) => {\n    if (!cart) return null;\n\n    const analysis = cartService.analyzeCart(cart);\n    if (!analysis) return null;\n\n    return {\n      cartId: cart.cartId,\n      userId: cart.userId,\n      userEmail: cart.userEmail,\n      totalProducts: analysis.productCount,\n      totalItems: analysis.totalItems,\n      totalValue: analysis.totalValue,\n      averageItemValue: analysis.totalValue / analysis.totalItems,\n      categories: Object.keys(analysis.itemsByCategory).length,\n      mostExpensiveProduct: analysis.mostExpensiveItem,\n      cheapestProduct: analysis.cheapestItem\n    };\n  },\n\n  // ========== CART ITEMS UTILITIES ==========\n\n  // T√¨m s·∫£n ph·∫©m trong gi·ªè h√†ng\n  findProductInCart: (cart, productId) => {\n    if (!cart || !cart.products) return null;\n    return cart.products.find(item => item.productId === productId);\n  },\n\n  // Ki·ªÉm tra s·∫£n ph·∫©m c√≥ trong gi·ªè h√†ng kh√¥ng\n  isProductInCart: (cart, productId) => {\n    return cartService.findProductInCart(cart, productId) !== null;\n  },\n\n  // L·∫•y s·ªë l∆∞·ª£ng s·∫£n ph·∫©m c·ª• th·ªÉ\n  getProductQuantity: (cart, productId) => {\n    const product = cartService.findProductInCart(cart, productId);\n    return product ? (product.quantity || 1) : 0;\n  },\n\n  // ========== PRICE CALCULATIONS ==========\n\n  // T√≠nh t·ªïng ti·ªÅn c·ªßa gi·ªè h√†ng\n  calculateTotal: (cartItems) => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const quantity = item.quantity || 1;\n      return total + (price * quantity);\n    }, 0);\n  },\n\n  // T√≠nh t·ªïng ti·ªÅn sau discount\n  calculateDiscountedTotal: (cartItems) => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      const originalPrice = item.price || 0;\n      const discountedPrice = item.specialPrice || originalPrice;\n      const quantity = item.quantity || 1;\n      return total + (discountedPrice * quantity);\n    }, 0);\n  },\n\n  // T√≠nh t·ªïng s·ªë ti·ªÅn discount\n  calculateTotalDiscount: (cartItems) => {\n    if (!cartItems || cartItems.length === 0) return 0;\n    return cartItems.reduce((total, item) => {\n      const originalPrice = item.price || 0;\n      const discountedPrice = item.specialPrice || originalPrice;\n      const quantity = item.quantity || 1;\n      const discountAmount = (originalPrice - discountedPrice) * quantity;\n      return total + Math.max(0, discountAmount);\n    }, 0);\n  },\n\n  // ========== FORMATTING ==========\n\n  // Format price hi·ªÉn th·ªã\n  formatPrice: (price) => {\n    return (Number(price) || 0).toLocaleString('vi-VN', {\n      style: 'currency',\n      currency: 'VND'\n    });\n  },\n\n  // Format s·ªë l∆∞·ª£ng\n  formatQuantity: (quantity) => {\n    return quantity || 1;\n  },\n\n  // ========== CART VALIDATION ==========\n\n  // Ki·ªÉm tra gi·ªè h√†ng h·ª£p l·ªá\n  validateCart: (cart) => {\n    if (!cart) return { isValid: false, message: 'Gi·ªè h√†ng kh√¥ng t·ªìn t·∫°i' };\n    if (!cart.products || cart.products.length === 0) {\n      return { isValid: false, message: 'Gi·ªè h√†ng tr·ªëng' };\n    }\n\n    const errors = [];\n    let totalCalculated = 0;\n\n    cart.products.forEach((item, index) => {\n      if (!item.productId) {\n        errors.push(`S·∫£n ph·∫©m th·ª© ${index + 1} kh√¥ng c√≥ ID`);\n      }\n      if (!item.productName) {\n        errors.push(`S·∫£n ph·∫©m th·ª© ${index + 1} kh√¥ng c√≥ t√™n`);\n      }\n      if (!item.quantity || item.quantity < 1) {\n        errors.push(`S·∫£n ph·∫©m \"${item.productName}\" c√≥ s·ªë l∆∞·ª£ng kh√¥ng h·ª£p l·ªá`);\n      }\n\n      const price = item.productPrice || item.specialPrice || item.price || 0;\n      const quantity = item.quantity || 1;\n      totalCalculated += price * quantity;\n    });\n\n    // Ki·ªÉm tra t·ªïng ti·ªÅn kh·ªõp\n    const cartTotal = cart.totalPrice || 0;\n    if (Math.abs(totalCalculated - cartTotal) > 1) {\n      errors.push(`T·ªïng ti·ªÅn kh√¥ng kh·ªõp: ${cartTotal} vs ${totalCalculated}`);\n    }\n\n    return {\n      isValid: errors.length === 0,\n      message: errors.length === 0 ? 'Gi·ªè h√†ng h·ª£p l·ªá' : errors.join(', '),\n      errors: errors,\n      calculatedTotal: totalCalculated,\n      cartTotal: cartTotal\n    };\n  },\n\n  // ========== EXPORT DATA ==========\n\n  // Xu·∫•t d·ªØ li·ªáu gi·ªè h√†ng ƒë·ªÉ hi·ªÉn th·ªã\n  exportCartData: (cart) => {\n    if (!cart) return null;\n\n    const analysis = cartService.analyzeCart(cart);\n    const validation = cartService.validateCart(cart);\n\n    return {\n      basicInfo: {\n        cartId: cart.cartId,\n        userId: cart.userId,\n        userEmail: cart.userEmail,\n        totalPrice: cart.totalPrice,\n        createdAt: cart.createdAt,\n        isActive: cart.isActive\n      },\n      products: cart.products?.map(item => ({\n        productId: item.productId,\n        productName: item.productName,\n        image: item.image,\n        price: item.price,\n        specialPrice: item.specialPrice,\n        productPrice: item.productPrice,\n        discount: item.discount,\n        quantity: item.quantity,\n        category: item.category?.categoryName,\n        totalValue: (item.productPrice || item.specialPrice || item.price || 0) * (item.quantity || 1)\n      })) || [],\n      statistics: analysis,\n      validation: validation\n    };\n  },\n\n  // ========== CART COMPARISON ==========\n\n  // So s√°nh hai gi·ªè h√†ng\n  compareCarts: (cart1, cart2) => {\n    const products1 = cart1?.products || [];\n    const products2 = cart2?.products || [];\n\n    const differences = {\n      added: [],\n      removed: [],\n      changed: []\n    };\n\n    // T√¨m s·∫£n ph·∫©m m·ªõi ƒë∆∞·ª£c th√™m\n    products2.forEach(product2 => {\n      const existingProduct = products1.find(p1 => p1.productId === product2.productId);\n      if (!existingProduct) {\n        differences.added.push(product2);\n      }\n    });\n\n    // T√¨m s·∫£n ph·∫©m b·ªã x√≥a\n    products1.forEach(product1 => {\n      const existingProduct = products2.find(p2 => p2.productId === product1.productId);\n      if (!existingProduct) {\n        differences.removed.push(product1);\n      }\n    });\n\n    // T√¨m s·∫£n ph·∫©m thay ƒë·ªïi s·ªë l∆∞·ª£ng\n    products1.forEach(product1 => {\n      const product2 = products2.find(p2 => p2.productId === product1.productId);\n      if (product2 && product1.quantity !== product2.quantity) {\n        differences.changed.push({\n          productId: product1.productId,\n          productName: product1.productName,\n          oldQuantity: product1.quantity,\n          newQuantity: product2.quantity,\n          change: product2.quantity - product1.quantity\n        });\n      }\n    });\n\n    return differences;\n  }\n};\n\nexport default cartService;"],"mappings":"AAAA;AACA,OAAOA,GAAG,MAAM,OAAO;AAEvB,MAAMC,WAAW,GAAG;EAClB;;EAEA;EACAC,UAAU,EAAE,MAAOC,KAAK,IAAK;IAC3B,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,iBAAiBF,KAAK,QAAQ,CAAC;MAC/D,OAAOC,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C,MAAMA,KAAK;IACb;EACF,CAAC;EAED;EACAE,aAAa,EAAE,MAAON,KAAK,IAAK;IAC9B,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMJ,GAAG,CAACU,GAAG,CAAC,iBAAiBP,KAAK,eAAe,CAAC;MACrE,OAAOC,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C,MAAMA,KAAK;IACb;EACF,CAAC;EAED;EACAI,OAAO,EAAE,MAAAA,CAAOR,KAAK,EAAES,MAAM,KAAK;IAChC,IAAI;MACF,MAAMR,QAAQ,GAAG,MAAMJ,GAAG,CAACU,GAAG,CAAC,iBAAiBP,KAAK,UAAUS,MAAM,EAAE,CAAC;MACxE,OAAOR,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C,MAAMA,KAAK;IACb;EACF,CAAC;EAED;EACAM,SAAS,EAAE,MAAAA,CAAOD,MAAM,EAAEE,SAAS,EAAEC,QAAQ,KAAK;IAChD,IAAI;MACF,MAAMX,QAAQ,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,iBAAiBO,MAAM,aAAaE,SAAS,aAAaC,QAAQ,EAAE,CAAC;MACrG,OAAOX,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACpD,MAAMA,KAAK;IACb;EACF,CAAC;EAED;EACAS,cAAc,EAAE,MAAAA,CAAOJ,MAAM,EAAEE,SAAS,EAAEC,QAAQ,KAAK;IACrD,IAAI;MACF,MAAMX,QAAQ,GAAG,MAAMJ,GAAG,CAACiB,GAAG,CAAC,iBAAiBL,MAAM,aAAaE,SAAS,aAAaC,QAAQ,EAAE,CAAC;MACpG,OAAOX,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACpD,MAAMA,KAAK;IACb;EACF,CAAC;EAED;EACAW,cAAc,EAAE,MAAAA,CAAON,MAAM,EAAEE,SAAS,KAAK;IAC3C,IAAI;MACF,MAAMV,QAAQ,GAAG,MAAMJ,GAAG,CAACmB,MAAM,CAAC,iBAAiBP,MAAM,aAAaE,SAAS,EAAE,CAAC;MAClF,OAAOV,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C,MAAMA,KAAK;IACb;EACF,CAAC;EAED;;EAEA;EACAa,WAAW,EAAE,MAAAA,CAAA,KAAY;IACvB,IAAI;MACF,MAAMhB,QAAQ,GAAG,MAAMJ,GAAG,CAACU,GAAG,CAAC,cAAc,CAAC;MAC9C,OAAON,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACtD,MAAMA,KAAK;IACb;EACF,CAAC;EAED;EACAc,mBAAmB,EAAE,MAAOT,MAAM,IAAK;IACrC,IAAI;MACF,MAAMR,QAAQ,GAAG,MAAMJ,GAAG,CAACU,GAAG,CAAC,gBAAgBE,MAAM,EAAE,CAAC;MACxD,OAAOR,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;MACxD,MAAMA,KAAK;IACb;EACF,CAAC;EAED;EACAe,YAAY,EAAE,MAAOC,SAAS,IAAK;IACjC,IAAI;MACF,MAAMnB,QAAQ,GAAG,MAAMJ,GAAG,CAACU,GAAG,CAAC,gBAAgBa,SAAS,QAAQ,CAAC;MACjE,OAAOnB,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;MACxD,MAAMA,KAAK;IACb;EACF,CAAC;EAED;;EAEA;EACAiB,WAAW,EAAE,MAAAA,CAAOrB,KAAK,EAAES,MAAM,EAAEa,aAAa,EAAEC,eAAe,KAAK;IACpE,IAAI;MACFlB,OAAO,CAACmB,GAAG,CAAC,yBAAyB,EAAE;QAAExB,KAAK;QAAES,MAAM;QAAEa,aAAa;QAAEC;MAAgB,CAAC,CAAC;MAEzF,MAAMtB,QAAQ,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAC7B,iBAAiBF,KAAK,UAAUS,MAAM,cAAc,EACpD,IAAI,EACJ;QACEgB,MAAM,EAAE;UACNH,aAAa,EAAEA,aAAa;UAC5BC,eAAe,EAAEA;QACnB;MACF,CACF,CAAC;MAEDlB,OAAO,CAACmB,GAAG,CAAC,+BAA+B,EAAEvB,QAAQ,CAACE,IAAI,CAAC;MAC3D,OAAOF,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MAAA,IAAAsB,eAAA,EAAAC,gBAAA,EAAAC,aAAA;MACdvB,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChDC,OAAO,CAACD,KAAK,CAAC,mBAAmB,EAAE;QACjCyB,MAAM,GAAAH,eAAA,GAAEtB,KAAK,CAACH,QAAQ,cAAAyB,eAAA,uBAAdA,eAAA,CAAgBG,MAAM;QAC9B1B,IAAI,GAAAwB,gBAAA,GAAEvB,KAAK,CAACH,QAAQ,cAAA0B,gBAAA,uBAAdA,gBAAA,CAAgBxB,IAAI;QAC1B2B,OAAO,EAAE1B,KAAK,CAAC0B,OAAO;QACtBC,GAAG,GAAAH,aAAA,GAAExB,KAAK,CAAC4B,MAAM,cAAAJ,aAAA,uBAAZA,aAAA,CAAcG;MACrB,CAAC,CAAC;MACF,MAAM3B,KAAK;IACb;EACF,CAAC;EAED;;EAEA;EACA6B,WAAW,EAAGC,IAAI,IAAK;IACrB,IAAI,CAACA,IAAI,IAAI,CAACA,IAAI,CAACC,QAAQ,EAAE,OAAO,IAAI;IAExC,MAAMC,QAAQ,GAAG;MACfC,UAAU,EAAE,CAAC;MACbC,UAAU,EAAE,CAAC;MACbC,YAAY,EAAEL,IAAI,CAACC,QAAQ,CAACK,MAAM;MAClCC,eAAe,EAAE,CAAC,CAAC;MACnBC,iBAAiB,EAAE,IAAI;MACvBC,YAAY,EAAE;IAChB,CAAC;IAEDT,IAAI,CAACC,QAAQ,CAACS,OAAO,CAACC,IAAI,IAAI;MAAA,IAAAC,cAAA;MAC5B,MAAMlC,QAAQ,GAAGiC,IAAI,CAACjC,QAAQ,IAAI,CAAC;MACnC,MAAMmC,KAAK,GAAGF,IAAI,CAACG,YAAY,IAAIH,IAAI,CAACI,YAAY,IAAIJ,IAAI,CAACE,KAAK,IAAI,CAAC;MACvE,MAAMT,UAAU,GAAGS,KAAK,GAAGnC,QAAQ;;MAEnC;MACAwB,QAAQ,CAACC,UAAU,IAAIzB,QAAQ;;MAE/B;MACAwB,QAAQ,CAACE,UAAU,IAAIA,UAAU;;MAEjC;MACA,MAAMY,QAAQ,GAAG,EAAAJ,cAAA,GAAAD,IAAI,CAACK,QAAQ,cAAAJ,cAAA,uBAAbA,cAAA,CAAeK,YAAY,KAAI,iBAAiB;MACjE,IAAI,CAACf,QAAQ,CAACK,eAAe,CAACS,QAAQ,CAAC,EAAE;QACvCd,QAAQ,CAACK,eAAe,CAACS,QAAQ,CAAC,GAAG;UACnCE,KAAK,EAAE,CAAC;UACRC,KAAK,EAAE,CAAC;UACRC,KAAK,EAAE;QACT,CAAC;MACH;MACAlB,QAAQ,CAACK,eAAe,CAACS,QAAQ,CAAC,CAACE,KAAK,IAAIxC,QAAQ;MACpDwB,QAAQ,CAACK,eAAe,CAACS,QAAQ,CAAC,CAACG,KAAK,IAAIf,UAAU;MACtDF,QAAQ,CAACK,eAAe,CAACS,QAAQ,CAAC,CAACI,KAAK,CAACC,IAAI,CAACV,IAAI,CAAC;;MAEnD;MACA,IAAI,CAACT,QAAQ,CAACM,iBAAiB,IAAIK,KAAK,GAAGX,QAAQ,CAACM,iBAAiB,CAACK,KAAK,EAAE;QAC3EX,QAAQ,CAACM,iBAAiB,GAAG;UAC3B/B,SAAS,EAAEkC,IAAI,CAAClC,SAAS;UACzB6C,WAAW,EAAEX,IAAI,CAACW,WAAW;UAC7BT,KAAK,EAAEA,KAAK;UACZnC,QAAQ,EAAEA,QAAQ;UAClB0B,UAAU,EAAEA;QACd,CAAC;MACH;;MAEA;MACA,IAAI,CAACF,QAAQ,CAACO,YAAY,IAAII,KAAK,GAAGX,QAAQ,CAACO,YAAY,CAACI,KAAK,EAAE;QACjEX,QAAQ,CAACO,YAAY,GAAG;UACtBhC,SAAS,EAAEkC,IAAI,CAAClC,SAAS;UACzB6C,WAAW,EAAEX,IAAI,CAACW,WAAW;UAC7BT,KAAK,EAAEA,KAAK;UACZnC,QAAQ,EAAEA,QAAQ;UAClB0B,UAAU,EAAEA;QACd,CAAC;MACH;IACF,CAAC,CAAC;IAEF,OAAOF,QAAQ;EACjB,CAAC;EAED;EACAqB,iBAAiB,EAAGvB,IAAI,IAAK;IAC3B,IAAI,CAACA,IAAI,EAAE,OAAO,IAAI;IAEtB,MAAME,QAAQ,GAAGtC,WAAW,CAACmC,WAAW,CAACC,IAAI,CAAC;IAC9C,IAAI,CAACE,QAAQ,EAAE,OAAO,IAAI;IAE1B,OAAO;MACL3B,MAAM,EAAEyB,IAAI,CAACzB,MAAM;MACnBiD,MAAM,EAAExB,IAAI,CAACwB,MAAM;MACnBtC,SAAS,EAAEc,IAAI,CAACd,SAAS;MACzBuC,aAAa,EAAEvB,QAAQ,CAACG,YAAY;MACpCF,UAAU,EAAED,QAAQ,CAACC,UAAU;MAC/BC,UAAU,EAAEF,QAAQ,CAACE,UAAU;MAC/BsB,gBAAgB,EAAExB,QAAQ,CAACE,UAAU,GAAGF,QAAQ,CAACC,UAAU;MAC3DwB,UAAU,EAAEC,MAAM,CAACC,IAAI,CAAC3B,QAAQ,CAACK,eAAe,CAAC,CAACD,MAAM;MACxDwB,oBAAoB,EAAE5B,QAAQ,CAACM,iBAAiB;MAChDuB,eAAe,EAAE7B,QAAQ,CAACO;IAC5B,CAAC;EACH,CAAC;EAED;;EAEA;EACAuB,iBAAiB,EAAEA,CAAChC,IAAI,EAAEvB,SAAS,KAAK;IACtC,IAAI,CAACuB,IAAI,IAAI,CAACA,IAAI,CAACC,QAAQ,EAAE,OAAO,IAAI;IACxC,OAAOD,IAAI,CAACC,QAAQ,CAACgC,IAAI,CAACtB,IAAI,IAAIA,IAAI,CAAClC,SAAS,KAAKA,SAAS,CAAC;EACjE,CAAC;EAED;EACAyD,eAAe,EAAEA,CAAClC,IAAI,EAAEvB,SAAS,KAAK;IACpC,OAAOb,WAAW,CAACoE,iBAAiB,CAAChC,IAAI,EAAEvB,SAAS,CAAC,KAAK,IAAI;EAChE,CAAC;EAED;EACA0D,kBAAkB,EAAEA,CAACnC,IAAI,EAAEvB,SAAS,KAAK;IACvC,MAAM2D,OAAO,GAAGxE,WAAW,CAACoE,iBAAiB,CAAChC,IAAI,EAAEvB,SAAS,CAAC;IAC9D,OAAO2D,OAAO,GAAIA,OAAO,CAAC1D,QAAQ,IAAI,CAAC,GAAI,CAAC;EAC9C,CAAC;EAED;;EAEA;EACA2D,cAAc,EAAGC,SAAS,IAAK;IAC7B,IAAI,CAACA,SAAS,IAAIA,SAAS,CAAChC,MAAM,KAAK,CAAC,EAAE,OAAO,CAAC;IAClD,OAAOgC,SAAS,CAACC,MAAM,CAAC,CAACC,KAAK,EAAE7B,IAAI,KAAK;MACvC,MAAME,KAAK,GAAGF,IAAI,CAACG,YAAY,IAAIH,IAAI,CAACI,YAAY,IAAIJ,IAAI,CAACE,KAAK,IAAI,CAAC;MACvE,MAAMnC,QAAQ,GAAGiC,IAAI,CAACjC,QAAQ,IAAI,CAAC;MACnC,OAAO8D,KAAK,GAAI3B,KAAK,GAAGnC,QAAS;IACnC,CAAC,EAAE,CAAC,CAAC;EACP,CAAC;EAED;EACA+D,wBAAwB,EAAGH,SAAS,IAAK;IACvC,IAAI,CAACA,SAAS,IAAIA,SAAS,CAAChC,MAAM,KAAK,CAAC,EAAE,OAAO,CAAC;IAClD,OAAOgC,SAAS,CAACC,MAAM,CAAC,CAACC,KAAK,EAAE7B,IAAI,KAAK;MACvC,MAAM+B,aAAa,GAAG/B,IAAI,CAACE,KAAK,IAAI,CAAC;MACrC,MAAM8B,eAAe,GAAGhC,IAAI,CAACI,YAAY,IAAI2B,aAAa;MAC1D,MAAMhE,QAAQ,GAAGiC,IAAI,CAACjC,QAAQ,IAAI,CAAC;MACnC,OAAO8D,KAAK,GAAIG,eAAe,GAAGjE,QAAS;IAC7C,CAAC,EAAE,CAAC,CAAC;EACP,CAAC;EAED;EACAkE,sBAAsB,EAAGN,SAAS,IAAK;IACrC,IAAI,CAACA,SAAS,IAAIA,SAAS,CAAChC,MAAM,KAAK,CAAC,EAAE,OAAO,CAAC;IAClD,OAAOgC,SAAS,CAACC,MAAM,CAAC,CAACC,KAAK,EAAE7B,IAAI,KAAK;MACvC,MAAM+B,aAAa,GAAG/B,IAAI,CAACE,KAAK,IAAI,CAAC;MACrC,MAAM8B,eAAe,GAAGhC,IAAI,CAACI,YAAY,IAAI2B,aAAa;MAC1D,MAAMhE,QAAQ,GAAGiC,IAAI,CAACjC,QAAQ,IAAI,CAAC;MACnC,MAAMmE,cAAc,GAAG,CAACH,aAAa,GAAGC,eAAe,IAAIjE,QAAQ;MACnE,OAAO8D,KAAK,GAAGM,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEF,cAAc,CAAC;IAC5C,CAAC,EAAE,CAAC,CAAC;EACP,CAAC;EAED;;EAEA;EACAG,WAAW,EAAGnC,KAAK,IAAK;IACtB,OAAO,CAACoC,MAAM,CAACpC,KAAK,CAAC,IAAI,CAAC,EAAEqC,cAAc,CAAC,OAAO,EAAE;MAClDC,KAAK,EAAE,UAAU;MACjBC,QAAQ,EAAE;IACZ,CAAC,CAAC;EACJ,CAAC;EAED;EACAC,cAAc,EAAG3E,QAAQ,IAAK;IAC5B,OAAOA,QAAQ,IAAI,CAAC;EACtB,CAAC;EAED;;EAEA;EACA4E,YAAY,EAAGtD,IAAI,IAAK;IACtB,IAAI,CAACA,IAAI,EAAE,OAAO;MAAEuD,OAAO,EAAE,KAAK;MAAE3D,OAAO,EAAE;IAAyB,CAAC;IACvE,IAAI,CAACI,IAAI,CAACC,QAAQ,IAAID,IAAI,CAACC,QAAQ,CAACK,MAAM,KAAK,CAAC,EAAE;MAChD,OAAO;QAAEiD,OAAO,EAAE,KAAK;QAAE3D,OAAO,EAAE;MAAiB,CAAC;IACtD;IAEA,MAAM4D,MAAM,GAAG,EAAE;IACjB,IAAIC,eAAe,GAAG,CAAC;IAEvBzD,IAAI,CAACC,QAAQ,CAACS,OAAO,CAAC,CAACC,IAAI,EAAE+C,KAAK,KAAK;MACrC,IAAI,CAAC/C,IAAI,CAAClC,SAAS,EAAE;QACnB+E,MAAM,CAACnC,IAAI,CAAC,gBAAgBqC,KAAK,GAAG,CAAC,cAAc,CAAC;MACtD;MACA,IAAI,CAAC/C,IAAI,CAACW,WAAW,EAAE;QACrBkC,MAAM,CAACnC,IAAI,CAAC,gBAAgBqC,KAAK,GAAG,CAAC,eAAe,CAAC;MACvD;MACA,IAAI,CAAC/C,IAAI,CAACjC,QAAQ,IAAIiC,IAAI,CAACjC,QAAQ,GAAG,CAAC,EAAE;QACvC8E,MAAM,CAACnC,IAAI,CAAC,aAAaV,IAAI,CAACW,WAAW,4BAA4B,CAAC;MACxE;MAEA,MAAMT,KAAK,GAAGF,IAAI,CAACG,YAAY,IAAIH,IAAI,CAACI,YAAY,IAAIJ,IAAI,CAACE,KAAK,IAAI,CAAC;MACvE,MAAMnC,QAAQ,GAAGiC,IAAI,CAACjC,QAAQ,IAAI,CAAC;MACnC+E,eAAe,IAAI5C,KAAK,GAAGnC,QAAQ;IACrC,CAAC,CAAC;;IAEF;IACA,MAAMiF,SAAS,GAAG3D,IAAI,CAAC4D,UAAU,IAAI,CAAC;IACtC,IAAId,IAAI,CAACe,GAAG,CAACJ,eAAe,GAAGE,SAAS,CAAC,GAAG,CAAC,EAAE;MAC7CH,MAAM,CAACnC,IAAI,CAAC,yBAAyBsC,SAAS,OAAOF,eAAe,EAAE,CAAC;IACzE;IAEA,OAAO;MACLF,OAAO,EAAEC,MAAM,CAAClD,MAAM,KAAK,CAAC;MAC5BV,OAAO,EAAE4D,MAAM,CAAClD,MAAM,KAAK,CAAC,GAAG,iBAAiB,GAAGkD,MAAM,CAACM,IAAI,CAAC,IAAI,CAAC;MACpEN,MAAM,EAAEA,MAAM;MACdO,eAAe,EAAEN,eAAe;MAChCE,SAAS,EAAEA;IACb,CAAC;EACH,CAAC;EAED;;EAEA;EACAK,cAAc,EAAGhE,IAAI,IAAK;IAAA,IAAAiE,cAAA;IACxB,IAAI,CAACjE,IAAI,EAAE,OAAO,IAAI;IAEtB,MAAME,QAAQ,GAAGtC,WAAW,CAACmC,WAAW,CAACC,IAAI,CAAC;IAC9C,MAAMkE,UAAU,GAAGtG,WAAW,CAAC0F,YAAY,CAACtD,IAAI,CAAC;IAEjD,OAAO;MACLmE,SAAS,EAAE;QACT5F,MAAM,EAAEyB,IAAI,CAACzB,MAAM;QACnBiD,MAAM,EAAExB,IAAI,CAACwB,MAAM;QACnBtC,SAAS,EAAEc,IAAI,CAACd,SAAS;QACzB0E,UAAU,EAAE5D,IAAI,CAAC4D,UAAU;QAC3BQ,SAAS,EAAEpE,IAAI,CAACoE,SAAS;QACzBC,QAAQ,EAAErE,IAAI,CAACqE;MACjB,CAAC;MACDpE,QAAQ,EAAE,EAAAgE,cAAA,GAAAjE,IAAI,CAACC,QAAQ,cAAAgE,cAAA,uBAAbA,cAAA,CAAeK,GAAG,CAAC3D,IAAI;QAAA,IAAA4D,eAAA;QAAA,OAAK;UACpC9F,SAAS,EAAEkC,IAAI,CAAClC,SAAS;UACzB6C,WAAW,EAAEX,IAAI,CAACW,WAAW;UAC7BkD,KAAK,EAAE7D,IAAI,CAAC6D,KAAK;UACjB3D,KAAK,EAAEF,IAAI,CAACE,KAAK;UACjBE,YAAY,EAAEJ,IAAI,CAACI,YAAY;UAC/BD,YAAY,EAAEH,IAAI,CAACG,YAAY;UAC/B2D,QAAQ,EAAE9D,IAAI,CAAC8D,QAAQ;UACvB/F,QAAQ,EAAEiC,IAAI,CAACjC,QAAQ;UACvBsC,QAAQ,GAAAuD,eAAA,GAAE5D,IAAI,CAACK,QAAQ,cAAAuD,eAAA,uBAAbA,eAAA,CAAetD,YAAY;UACrCb,UAAU,EAAE,CAACO,IAAI,CAACG,YAAY,IAAIH,IAAI,CAACI,YAAY,IAAIJ,IAAI,CAACE,KAAK,IAAI,CAAC,KAAKF,IAAI,CAACjC,QAAQ,IAAI,CAAC;QAC/F,CAAC;MAAA,CAAC,CAAC,KAAI,EAAE;MACTgG,UAAU,EAAExE,QAAQ;MACpBgE,UAAU,EAAEA;IACd,CAAC;EACH,CAAC;EAED;;EAEA;EACAS,YAAY,EAAEA,CAACC,KAAK,EAAEC,KAAK,KAAK;IAC9B,MAAMC,SAAS,GAAG,CAAAF,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAE3E,QAAQ,KAAI,EAAE;IACvC,MAAM8E,SAAS,GAAG,CAAAF,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAE5E,QAAQ,KAAI,EAAE;IAEvC,MAAM+E,WAAW,GAAG;MAClBC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,EAAE;MACXC,OAAO,EAAE;IACX,CAAC;;IAED;IACAJ,SAAS,CAACrE,OAAO,CAAC0E,QAAQ,IAAI;MAC5B,MAAMC,eAAe,GAAGP,SAAS,CAAC7C,IAAI,CAACqD,EAAE,IAAIA,EAAE,CAAC7G,SAAS,KAAK2G,QAAQ,CAAC3G,SAAS,CAAC;MACjF,IAAI,CAAC4G,eAAe,EAAE;QACpBL,WAAW,CAACC,KAAK,CAAC5D,IAAI,CAAC+D,QAAQ,CAAC;MAClC;IACF,CAAC,CAAC;;IAEF;IACAN,SAAS,CAACpE,OAAO,CAAC6E,QAAQ,IAAI;MAC5B,MAAMF,eAAe,GAAGN,SAAS,CAAC9C,IAAI,CAACuD,EAAE,IAAIA,EAAE,CAAC/G,SAAS,KAAK8G,QAAQ,CAAC9G,SAAS,CAAC;MACjF,IAAI,CAAC4G,eAAe,EAAE;QACpBL,WAAW,CAACE,OAAO,CAAC7D,IAAI,CAACkE,QAAQ,CAAC;MACpC;IACF,CAAC,CAAC;;IAEF;IACAT,SAAS,CAACpE,OAAO,CAAC6E,QAAQ,IAAI;MAC5B,MAAMH,QAAQ,GAAGL,SAAS,CAAC9C,IAAI,CAACuD,EAAE,IAAIA,EAAE,CAAC/G,SAAS,KAAK8G,QAAQ,CAAC9G,SAAS,CAAC;MAC1E,IAAI2G,QAAQ,IAAIG,QAAQ,CAAC7G,QAAQ,KAAK0G,QAAQ,CAAC1G,QAAQ,EAAE;QACvDsG,WAAW,CAACG,OAAO,CAAC9D,IAAI,CAAC;UACvB5C,SAAS,EAAE8G,QAAQ,CAAC9G,SAAS;UAC7B6C,WAAW,EAAEiE,QAAQ,CAACjE,WAAW;UACjCmE,WAAW,EAAEF,QAAQ,CAAC7G,QAAQ;UAC9BgH,WAAW,EAAEN,QAAQ,CAAC1G,QAAQ;UAC9BiH,MAAM,EAAEP,QAAQ,CAAC1G,QAAQ,GAAG6G,QAAQ,CAAC7G;QACvC,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IAEF,OAAOsG,WAAW;EACpB;AACF,CAAC;AAED,eAAepH,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}