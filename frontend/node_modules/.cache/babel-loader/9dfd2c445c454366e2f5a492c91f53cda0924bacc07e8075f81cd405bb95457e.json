{"ast":null,"code":"import api from './api'; // Đảm bảo bạn dùng instance axios có đính kèm Token\n\nconst cartService = {\n  /**\n   * Lấy cartId từ thông tin User đã lưu khi Login\n   * Tương đương với getCartIdFromToken() bên Mobile\n   */\n  getCartId: () => {\n    const userJson = localStorage.getItem('user');\n    if (!userJson) return null;\n    try {\n      var _user$cart;\n      const user = JSON.parse(userJson);\n      // Backend thường trả về cartId trong object user hoặc user.cart\n      return (user === null || user === void 0 ? void 0 : (_user$cart = user.cart) === null || _user$cart === void 0 ? void 0 : _user$cart.cartId) || (user === null || user === void 0 ? void 0 : user.cartId) || null;\n    } catch (e) {\n      console.error(\"Lỗi parse user từ localStorage\", e);\n      return null;\n    }\n  },\n  /**\n   * Thêm sản phẩm vào giỏ hàng\n   * Khớp với endpoint: /public/carts/{cartId}/products/{productId}/quantity/{quantity}\n   */\n  addToCart: async (cartId, productId, quantity) => {\n    try {\n      const response = await api.post(`/public/carts/${cartId}/products/${productId}/quantity/${quantity}`);\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  }\n};\nexport default cartService;","map":{"version":3,"names":["api","cartService","getCartId","userJson","localStorage","getItem","_user$cart","user","JSON","parse","cart","cartId","e","console","error","addToCart","productId","quantity","response","post","data"],"sources":["E:/Java/DoAn/frontend/src/services/cartService.js"],"sourcesContent":["import api from './api'; // Đảm bảo bạn dùng instance axios có đính kèm Token\n\nconst cartService = {\n  /**\n   * Lấy cartId từ thông tin User đã lưu khi Login\n   * Tương đương với getCartIdFromToken() bên Mobile\n   */\n  getCartId: () => {\n    const userJson = localStorage.getItem('user');\n    if (!userJson) return null;\n    \n    try {\n      const user = JSON.parse(userJson);\n      // Backend thường trả về cartId trong object user hoặc user.cart\n      return user?.cart?.cartId || user?.cartId || null;\n    } catch (e) {\n      console.error(\"Lỗi parse user từ localStorage\", e);\n      return null;\n    }\n  },\n\n  /**\n   * Thêm sản phẩm vào giỏ hàng\n   * Khớp với endpoint: /public/carts/{cartId}/products/{productId}/quantity/{quantity}\n   */\n  addToCart: async (cartId, productId, quantity) => {\n    try {\n      const response = await api.post(\n        `/public/carts/${cartId}/products/${productId}/quantity/${quantity}`\n      );\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  }\n};\n\nexport default cartService;"],"mappings":"AAAA,OAAOA,GAAG,MAAM,OAAO,CAAC,CAAC;;AAEzB,MAAMC,WAAW,GAAG;EAClB;AACF;AACA;AACA;EACEC,SAAS,EAAEA,CAAA,KAAM;IACf,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAC7C,IAAI,CAACF,QAAQ,EAAE,OAAO,IAAI;IAE1B,IAAI;MAAA,IAAAG,UAAA;MACF,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACN,QAAQ,CAAC;MACjC;MACA,OAAO,CAAAI,IAAI,aAAJA,IAAI,wBAAAD,UAAA,GAAJC,IAAI,CAAEG,IAAI,cAAAJ,UAAA,uBAAVA,UAAA,CAAYK,MAAM,MAAIJ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,MAAM,KAAI,IAAI;IACnD,CAAC,CAAC,OAAOC,CAAC,EAAE;MACVC,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEF,CAAC,CAAC;MAClD,OAAO,IAAI;IACb;EACF,CAAC;EAED;AACF;AACA;AACA;EACEG,SAAS,EAAE,MAAAA,CAAOJ,MAAM,EAAEK,SAAS,EAAEC,QAAQ,KAAK;IAChD,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMlB,GAAG,CAACmB,IAAI,CAC7B,iBAAiBR,MAAM,aAAaK,SAAS,aAAaC,QAAQ,EACpE,CAAC;MACD,OAAOC,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAON,KAAK,EAAE;MACd,MAAMA,KAAK;IACb;EACF;AACF,CAAC;AAED,eAAeb,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}